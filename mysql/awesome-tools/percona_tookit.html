<!DOCTYPE html>
<html lang="zh-cn">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>percona toolkit | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/mysql/awesome-tools/percona_tookit.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="zh-cn" href="http://www.toberoot.com/zh-cn/mysql/awesome-tools/percona_tookit">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="percona toolkit 简介Percona Toolkit is a collection of advanced command-line tools used by Percona (http:&#x2F;&#x2F;www.percona.com&#x2F;) support staff to perform a variety of MySQL and system tasks t">
<meta property="og:type" content="website">
<meta property="og:title" content="percona toolkit">
<meta property="og:url" content="http://www.toberoot.com/mysql/awesome-tools/percona_tookit">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="percona toolkit 简介Percona Toolkit is a collection of advanced command-line tools used by Percona (http:&#x2F;&#x2F;www.percona.com&#x2F;) support staff to perform a variety of MySQL and system tasks t">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162413141?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162555349?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162559923?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162622764?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162634695?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162642100?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162652141?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162715795?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162739315?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162752175?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162811467?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162829791?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162834884?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162842529?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162922242?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162935837?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708162945157?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="og:image" content="https://img-blog.csdn.net/20180708163011293?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="article:published_time" content="2020-10-19T08:20:54.885Z">
<meta property="article:modified_time" content="2020-10-19T06:38:03.916Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdn.net/20180708162413141?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-6482217598104186",
          enable_page_level_ads: true
     });
  </script>
  <!-- at the end of the HEAD -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href='/' id="logo">ToBeRoot</a>
    </h1>
    <nav id="main-nav">
      <a href="/api/" class="main-nav-link">MySQL8.0</a><a href="/mse/" class="main-nav-link">MSE</a><a href="/linux/" class="main-nav-link">Linux</a><a href="/mysql/" class="main-nav-link">MySQL</a><a href="/oracle/" class="main-nav-link">Oracle</a><a href="/nosql/" class="main-nav-link">NoSQL</a><a href="/devops/" class="main-nav-link">DevOps</a><a href="/git/" class="main-nav-link">Git</a><a href="/cloud/" class="main-nav-link">Cloud</a><a href="/news/" class="main-nav-link">News</a>
      <a target="_blank" href="https://github.com/BoobooWei" rel="external nofollow noreferrer noopener" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
      <a href="/themes/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>技术广角</span></label></a>
    </div>


    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">percona toolkit</h1>
                <a target="_blank" href="https://github.com/booboowei/site/edit/master/source/mysql/awesome-tools/percona_tookit.md" rel="external nofollow noreferrer noopener" class="article-edit-link" title="改进本文"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <h1 id="percona-toolkit-简介" class="article-heading"><a href="#percona-toolkit-简介" class="headerlink" title="percona toolkit 简介"></a>percona toolkit 简介<a class="article-anchor" href="#percona-toolkit-简介" aria-hidden="true"></a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Percona Toolkit is a collection of advanced command-line tools used by Percona (http:&#x2F;&#x2F;www.percona.com&#x2F;) support staff to perform a variety of MySQL and system tasks that are too difficult or complex to perform manually. </span><br><span class="line">These tools are ideal alternatives to private or “one-off” scripts because they are professionally developed, formally tested, and fully documented. They are also fully self-contained, so installation is quick and easy and no libraries are installed. </span><br><span class="line">Percona Toolkit is derived from Maatkit and Aspersa, two of the best-known toolkits for MySQL server administration. It is developed and supported by Percona. For more information and other free, open-source software developed by Percona, visit http:&#x2F;&#x2F;www.percona.com&#x2F;software&#x2F;.</span><br></pre></td></tr></table></figure>

<p>Percona工具包文档Percona Toolkit是Percona（<a target="_blank" href="http://www.percona.com/）" rel="external nofollow noreferrer noopener">http://www.percona.com/）</a> 支持人员使用的高级命令行工具的集合，用于执行各种MySQL和系统任务，这些任务太难或难以手动执行。这些工具是私有或“一次性”脚本的理想替代品，因为它们是专业开发，正式测试和完整记录的。它们也是完全独立的，因此安装快速简便，无需安装库。<br>Percona Toolkit源自Maatkit和Aspersa，这两个最着名的MySQL服务器管理工​​具包。它由Percona开发和支持。有关Percona开发的更多信息和其他免费开源软件，请访问<a target="_blank" href="http://www.percona.com/software/。" rel="external nofollow noreferrer noopener">http://www.percona.com/software/。</a> </p>
<h4 id="在linux（centOS）上安装软件：yum-install-y-percona-toolkit" class="article-heading"><a href="#在linux（centOS）上安装软件：yum-install-y-percona-toolkit" class="headerlink" title="在linux（centOS）上安装软件：yum install -y percona-toolkit"></a>在linux（centOS）上安装软件：yum install -y percona-toolkit<a class="article-anchor" href="#在linux（centOS）上安装软件：yum-install-y-percona-toolkit" aria-hidden="true"></a></h4><table>
<thead>
<tr>
<th>工具命令</th>
<th>工具作用</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>开发类</td>
<td>pt-duplicate-key-checker</td>
<td>列出并删除重复的索引和外键</td>
</tr>
<tr>
<td></td>
<td>pt-online-schema-change</td>
<td>在线修改表结构</td>
</tr>
<tr>
<td></td>
<td>pt-query-advisor</td>
<td>分析查询语句，并给出建议，有bug 已废弃</td>
</tr>
<tr>
<td></td>
<td>pt-show-grants</td>
<td>规范化和打印权限</td>
</tr>
<tr>
<td></td>
<td>pt-upgrade</td>
<td>在多个服务器上执行查询，并比较不同</td>
</tr>
<tr>
<td>性能类</td>
<td>pt-index-usage</td>
<td>分析日志中索引使用情况，并出报告</td>
</tr>
<tr>
<td></td>
<td>pt-pmp</td>
<td>为查询结果跟踪，并汇总跟踪结果</td>
</tr>
<tr>
<td></td>
<td>pt-visual-explain</td>
<td>格式化执行计划</td>
</tr>
<tr>
<td></td>
<td>pt-table-usage</td>
<td>分析日志中查询并分析表使用情况 pt 2.2新增命令</td>
</tr>
<tr>
<td>配置类</td>
<td>pt-config-diff</td>
<td>比较配置文件和参数</td>
</tr>
<tr>
<td></td>
<td>pt-mysql-summary</td>
<td>对mysql配置和status进行汇总</td>
</tr>
<tr>
<td></td>
<td>pt-variable-advisor</td>
<td>分析参数，并提出建议</td>
</tr>
<tr>
<td>监控类</td>
<td>pt-deadlock-logger</td>
<td>提取和记录mysql死锁信息</td>
</tr>
<tr>
<td></td>
<td>pt-fk-error-logger</td>
<td>提取和记录外键信息</td>
</tr>
<tr>
<td></td>
<td>pt-mext</td>
<td>并行查看status样本信息</td>
</tr>
<tr>
<td></td>
<td>pt-query-digest</td>
<td>分析查询日志，并产生报告 常用命令</td>
</tr>
<tr>
<td></td>
<td>pt-trend</td>
<td>按照时间段读取slow日志信息 已废弃</td>
</tr>
<tr>
<td>复制类</td>
<td>pt-heartbeat</td>
<td>监控mysql复制延迟</td>
</tr>
<tr>
<td></td>
<td>pt-slave-delay</td>
<td>设定从落后主的时间</td>
</tr>
<tr>
<td></td>
<td>pt-slave-find</td>
<td>查找和打印所有mysql复制层级关系</td>
</tr>
<tr>
<td></td>
<td>pt-slave-restart</td>
<td>监控salve错误，并尝试重启salve</td>
</tr>
<tr>
<td></td>
<td>pt-table-checksum</td>
<td>校验主从复制一致性</td>
</tr>
<tr>
<td></td>
<td>pt-table-sync</td>
<td>高效同步表数据</td>
</tr>
<tr>
<td>系统类</td>
<td>pt-diskstats</td>
<td>查看系统磁盘状态</td>
</tr>
<tr>
<td></td>
<td>pt-fifo-split</td>
<td>拟切割文件并输出</td>
</tr>
<tr>
<td></td>
<td>pt-summary</td>
<td>收集和显示系统概况</td>
</tr>
<tr>
<td></td>
<td>pt-stalk</td>
<td>出现问题时，收集诊断数据</td>
</tr>
<tr>
<td></td>
<td>pt-sift</td>
<td>浏览由pt-stalk创建的文件 pt 2.2新增命令</td>
</tr>
<tr>
<td></td>
<td>pt-ioprofile</td>
<td>查询进程IO并打印一个IO活动表 pt 2.2新增命令</td>
</tr>
<tr>
<td>实用类</td>
<td>pt-archiver</td>
<td>将表数据归档到另一个表或文件中</td>
</tr>
<tr>
<td></td>
<td>pt-find</td>
<td>查找表并执行命令</td>
</tr>
<tr>
<td></td>
<td>pt-kill</td>
<td>Kill掉符合条件的sql 常用命令</td>
</tr>
<tr>
<td></td>
<td>pt-align</td>
<td>对齐其他工具的输出 pt 2.2新增命令</td>
</tr>
<tr>
<td></td>
<td>pt-fingerprint</td>
<td>将查询转成密文 pt 2.2新增命令</td>
</tr>
</tbody></table>
<p>汇总目录官方文档地址：<br><a target="_blank" href="https://www.percona.com/doc/percona-toolkit/2.2/index.html" rel="external nofollow noreferrer noopener">https://www.percona.com/doc/percona-toolkit/2.2/index.html</a></p>
<h4 id="备注：基本所有涉及到数据库的操作，都需要填写相应的DNS命令，例如用户名，密码，数据库，数据库表等等。" class="article-heading"><a href="#备注：基本所有涉及到数据库的操作，都需要填写相应的DNS命令，例如用户名，密码，数据库，数据库表等等。" class="headerlink" title="备注：基本所有涉及到数据库的操作，都需要填写相应的DNS命令，例如用户名，密码，数据库，数据库表等等。"></a>备注：基本所有涉及到数据库的操作，都需要填写相应的DNS命令，例如用户名，密码，数据库，数据库表等等。<a class="article-anchor" href="#备注：基本所有涉及到数据库的操作，都需要填写相应的DNS命令，例如用户名，密码，数据库，数据库表等等。" aria-hidden="true"></a></h4><h2 id="pt-align" class="article-heading"><a href="#pt-align" class="headerlink" title="pt-align"></a>pt-align<a class="article-anchor" href="#pt-align" aria-hidden="true"></a></h2><h4 id="pt-align-files" class="article-heading"><a href="#pt-align-files" class="headerlink" title="pt-align [files]"></a>pt-align [files]<a class="article-anchor" href="#pt-align-files" aria-hidden="true"></a></h4><p>将表的信息按列对齐打印输出。如果没有指定文件，则默认输出STDIN。</p>
<p>没有使用命令输出结果<br><img src="https://img-blog.csdn.net/20180708162413141?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>使用命令输出结果<br><img src="https://img-blog.csdn.net/20180708162555349?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>使用例子<br><img src="https://img-blog.csdn.net/20180708162559923?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h2 id="pt-archiver" class="article-heading"><a href="#pt-archiver" class="headerlink" title="pt-archiver"></a>pt-archiver<a class="article-anchor" href="#pt-archiver" aria-hidden="true"></a></h2><h4 id="pt-archiver-OPTIONS-–source-DSN-–where-WHERE" class="article-heading"><a href="#pt-archiver-OPTIONS-–source-DSN-–where-WHERE" class="headerlink" title="pt-archiver [OPTIONS] –source DSN –where WHERE"></a>pt-archiver [OPTIONS] –source DSN –where WHERE<a class="article-anchor" href="#pt-archiver-OPTIONS-–source-DSN-–where-WHERE" aria-hidden="true"></a></h4><p>将数据库的表里的数据存储到另外一个表或者文件里。总而言之：就是用来归档数据。</p>
<p>作用：<br>• 清理线上过期数据；<br>• 导出线上数据，到线下数据作处理；<br>• 清理过期数据，并把数据归档到本地归档表中，或者远端归档服务器。<br>注意：pt-archiver操作的表必须有主键<br>具体使用，从一张表导入到另外一张表，要注意的是新表必须是已经建立好的一样的表结构，不会自动创建表，而且where条件是必须指定的：<br><img src="https://img-blog.csdn.net/20180708162622764?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180708162634695?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180708162642100?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>归档前的准备<br>需要配置client字符集为utf-8,如果你用了utf-8的编码,防止归档数据为乱码</p>
<h2 id="pt-online-schema-change" class="article-heading"><a href="#pt-online-schema-change" class="headerlink" title="pt-online-schema-change"></a>pt-online-schema-change<a class="article-anchor" href="#pt-online-schema-change" aria-hidden="true"></a></h2><h4 id="pt-online-schema-change-OPTIONS-DNS" class="article-heading"><a href="#pt-online-schema-change-OPTIONS-DNS" class="headerlink" title="pt-online-schema-change [OPTIONS] DNS"></a>pt-online-schema-change [OPTIONS] DNS<a class="article-anchor" href="#pt-online-schema-change-OPTIONS-DNS" aria-hidden="true"></a></h4><p>ALTER操作但是表没有锁定它们<br><img src="https://img-blog.csdn.net/20180708162652141?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h5 id="pt-online-schema-change-–alter-“add-column-col-int-11-Default-null”-h-host-P-3306-D-db-t-table-u-username-p-password-–execute" class="article-heading"><a href="#pt-online-schema-change-–alter-“add-column-col-int-11-Default-null”-h-host-P-3306-D-db-t-table-u-username-p-password-–execute" class="headerlink" title="pt-online-schema-change –alter “add column col int(11) Default null” h=host,P=3306,D=db,t=table,u=username,p=password –execute"></a>pt-online-schema-change –alter “add column col int(11) Default null” h=host,P=3306,D=db,t=table,u=username,p=password –execute<a class="article-anchor" href="#pt-online-schema-change-–alter-“add-column-col-int-11-Default-null”-h-host-P-3306-D-db-t-table-u-username-p-password-–execute" aria-hidden="true"></a></h5><p>参数说明：<br>其中 –alter “add column col int(11) Default null” 为OPTIONS里面的内容，接下来是DNS的内容。<br>D：数据库名<br>t：数据库表名<br>u：数据库登录用户名（可有可无，默认root）<br>p：数据库密码（可有可无，默认没有密码）<br>h：数据库地址（当使用远程连接的时候，本地的数据库IP必须被远程的数据库所允许请求连接）（可有可无，默认localhost）<br>P：端口（可有可无，默认3306）<br>-execute 表示执行该语句。<br>PS:<br>\1. 当参数有特殊符号的时候，使用’’(单引号)括起来。<br>\2. OPTIONS中的””的命令内容无法使用多命令进行批操作。</p>
<h2 id="pt-config-diff" class="article-heading"><a href="#pt-config-diff" class="headerlink" title="pt-config-diff"></a>pt-config-diff<a class="article-anchor" href="#pt-config-diff" aria-hidden="true"></a></h2><h4 id="pt-config-diff-OPTIONS-CONFIG-CONFIG-CONFIG…" class="article-heading"><a href="#pt-config-diff-OPTIONS-CONFIG-CONFIG-CONFIG…" class="headerlink" title="pt-config-diff [OPTIONS] CONFIG CONFIG [CONFIG…]"></a>pt-config-diff [OPTIONS] CONFIG CONFIG [CONFIG…]<a class="article-anchor" href="#pt-config-diff-OPTIONS-CONFIG-CONFIG-CONFIG…" aria-hidden="true"></a></h4><p>比较多份配置文件的不同</p>
<h5 id="pt-config-diff-h-host1-h-host2" class="article-heading"><a href="#pt-config-diff-h-host1-h-host2" class="headerlink" title="pt-config-diff h=host1 h=host2"></a>pt-config-diff h=host1 h=host2<a class="article-anchor" href="#pt-config-diff-h-host1-h-host2" aria-hidden="true"></a></h5><p>比较2个地址中配置文件的不同</p>
<h5 id="pt-config-diff-etc-my-cof-h-host2" class="article-heading"><a href="#pt-config-diff-etc-my-cof-h-host2" class="headerlink" title="pt-config-diff /etc/my.cof h=host2"></a>pt-config-diff /etc/my.cof h=host2<a class="article-anchor" href="#pt-config-diff-etc-my-cof-h-host2" aria-hidden="true"></a></h5><p>比较本地配置文件和远程配置文件的mysqld的不同</p>
<h5 id="pt-config-diff-etc-my-cof-etc-wsk-cof" class="article-heading"><a href="#pt-config-diff-etc-my-cof-etc-wsk-cof" class="headerlink" title="pt-config-diff /etc/my.cof /etc/wsk.cof"></a>pt-config-diff /etc/my.cof /etc/wsk.cof<a class="article-anchor" href="#pt-config-diff-etc-my-cof-etc-wsk-cof" aria-hidden="true"></a></h5><p>比较2个文件找那个mysqld的不同<br>结果输出：</p>
<p><img src="https://img-blog.csdn.net/20180708162715795?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h2 id="pt-deadlock-logger" class="article-heading"><a href="#pt-deadlock-logger" class="headerlink" title="pt-deadlock-logger"></a>pt-deadlock-logger<a class="article-anchor" href="#pt-deadlock-logger" aria-hidden="true"></a></h2><p>记录MySQL死锁的原因日志</p>
<h4 id="pt-deadlock-logger-OPTIONS-DSN" class="article-heading"><a href="#pt-deadlock-logger-OPTIONS-DSN" class="headerlink" title="pt-deadlock-logger [OPTIONS] DSN"></a>pt-deadlock-logger [OPTIONS] DSN<a class="article-anchor" href="#pt-deadlock-logger-OPTIONS-DSN" aria-hidden="true"></a></h4><h5 id="pt-deadlock-logger-h-host1" class="article-heading"><a href="#pt-deadlock-logger-h-host1" class="headerlink" title="pt-deadlock-logger h=host1"></a>pt-deadlock-logger h=host1<a class="article-anchor" href="#pt-deadlock-logger-h-host1" aria-hidden="true"></a></h5><p>在host1上打印死锁的日志</p>
<h5 id="pt-deadlock-logger-h-host1-–iterations-1" class="article-heading"><a href="#pt-deadlock-logger-h-host1-–iterations-1" class="headerlink" title="pt-deadlock-logger h=host1 –iterations 1"></a>pt-deadlock-logger h=host1 –iterations 1<a class="article-anchor" href="#pt-deadlock-logger-h-host1-–iterations-1" aria-hidden="true"></a></h5><p>在host1上打印死锁日志并退出</p>
<h5 id="pt-deadlock-logger-h-host1-–dest-h-host2-D-percona-schema-t-deadlocks" class="article-heading"><a href="#pt-deadlock-logger-h-host1-–dest-h-host2-D-percona-schema-t-deadlocks" class="headerlink" title="pt-deadlock-logger h=host1 –dest h=host2,D=percona_schema,t=deadlocks"></a>pt-deadlock-logger h=host1 –dest h=host2,D=percona_schema,t=deadlocks<a class="article-anchor" href="#pt-deadlock-logger-h-host1-–dest-h-host2-D-percona-schema-t-deadlocks" aria-hidden="true"></a></h5><p>将host1上的死锁信息打印到host2对应的数据库表中</p>
<h2 id="pt-diskstats" class="article-heading"><a href="#pt-diskstats" class="headerlink" title="pt-diskstats"></a>pt-diskstats<a class="article-anchor" href="#pt-diskstats" aria-hidden="true"></a></h2><h4 id="pt-diskstats-1" class="article-heading"><a href="#pt-diskstats-1" class="headerlink" title="pt-diskstats"></a>pt-diskstats<a class="article-anchor" href="#pt-diskstats-1" aria-hidden="true"></a></h4><p>直接显示磁盘IO信息，与iostat类似，但是更详细。<br><img src="https://img-blog.csdn.net/20180708162739315?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<p>实时循环显示数据结果</p>
<h2 id="pt-duplicate-key-checker" class="article-heading"><a href="#pt-duplicate-key-checker" class="headerlink" title="pt-duplicate-key-checker"></a>pt-duplicate-key-checker<a class="article-anchor" href="#pt-duplicate-key-checker" aria-hidden="true"></a></h2><h4 id="pt-duplicate-key-checker-OPTIONS-DNS" class="article-heading"><a href="#pt-duplicate-key-checker-OPTIONS-DNS" class="headerlink" title="pt-duplicate-key-checker [OPTIONS] [DNS]"></a>pt-duplicate-key-checker [OPTIONS] [DNS]<a class="article-anchor" href="#pt-duplicate-key-checker-OPTIONS-DNS" aria-hidden="true"></a></h4><p>查找数据库中重复的索引和外键。</p>
<p>根据结果，我们可以看出重复的索引信息，包括索引定义，列的数据类型，以及修复建议。<br>索引没有什么问题，如果有问题则会显示有问题的索引，并提供删除的sql语句<br>没有问题：<br><img src="https://img-blog.csdn.net/20180708162752175?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>存在重复索引</p>
<h2 id="pt-fifo-split" class="article-heading"><a href="#pt-fifo-split" class="headerlink" title="pt-fifo-split"></a>pt-fifo-split<a class="article-anchor" href="#pt-fifo-split" aria-hidden="true"></a></h2><h4 id="pt-fifo-split-OPTIONS-FILE" class="article-heading"><a href="#pt-fifo-split-OPTIONS-FILE" class="headerlink" title="pt-fifo-split [OPTIONS] [FILE]"></a>pt-fifo-split [OPTIONS] [FILE]<a class="article-anchor" href="#pt-fifo-split-OPTIONS-FILE" aria-hidden="true"></a></h4><p>模拟切割文件，并通过管道传递给先入先出队列而不用真正的切割文件。</p>
<h5 id="pt-fifo-split-–lines-1000000-hugefile-txt" class="article-heading"><a href="#pt-fifo-split-–lines-1000000-hugefile-txt" class="headerlink" title="pt-fifo-split –lines 1000000 hugefile.txt"></a>pt-fifo-split –lines 1000000 hugefile.txt<a class="article-anchor" href="#pt-fifo-split-–lines-1000000-hugefile-txt" aria-hidden="true"></a></h5><p>使用pt-fifo-split分割一个大文件，每次读1000000行</p>
<p>pt-fifo-split 默认会在/tmp下面建立一个fifo文件，并读取大文件中的数据写入到fifo文件，每次达到指定行数就往fifo文件中打印一个EOF字符，读取完成以后，关闭掉fifo文件并移走，然后重建fifo文件，打印更多的行。这样可以保证你每次读取的时候都能读取到制定的行数直到读取完成。注意此工具只能工作在类unix操作系统。</p>
<p>常用选项：<br>–fifo /tmp/pt-fifo-split，指定fifo文件的路径；<br>–offset 0，如果不打算从第一行开始读，可以设置这个参数；<br>–lines 1000，每次读取的行数；<br>–force，如果fifo文件已经存在，就先删除它，然后重新创建一个fifo文件；</p>
<h2 id="pt-find" class="article-heading"><a href="#pt-find" class="headerlink" title="pt-find"></a>pt-find<a class="article-anchor" href="#pt-find" aria-hidden="true"></a></h2><h4 id="pt-find-OPTIONS-DATABASES" class="article-heading"><a href="#pt-find-OPTIONS-DATABASES" class="headerlink" title="pt-find [OPTIONS] [DATABASES]"></a>pt-find [OPTIONS] [DATABASES]<a class="article-anchor" href="#pt-find-OPTIONS-DATABASES" aria-hidden="true"></a></h4><p>查找MySQL中的表并执行操作，类似GUN的find命令。默认操作是打印数据库和表名。</p>
<h5 id="pt-find-–ctime-0-–engine-InnoDB-–password-sk-w1103" class="article-heading"><a href="#pt-find-–ctime-0-–engine-InnoDB-–password-sk-w1103" class="headerlink" title="pt-find –ctime +0 –engine InnoDB –password=sk.w1103"></a>pt-find –ctime +0 –engine InnoDB –password=sk.w1103<a class="article-anchor" href="#pt-find-–ctime-0-–engine-InnoDB-–password-sk-w1103" aria-hidden="true"></a></h5><p>查找0天前所有用InnoDB创造的表并且打印出来<br><img src="https://img-blog.csdn.net/20180708162811467?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h5 id="pt-find-–engine-InnoDB-–exec-“ALTER-TABLE-D-N-ENGINE-MyISAM”-–password-””-test" class="article-heading"><a href="#pt-find-–engine-InnoDB-–exec-“ALTER-TABLE-D-N-ENGINE-MyISAM”-–password-””-test" class="headerlink" title="pt-find –engine InnoDB –exec “ALTER TABLE %D.%N ENGINE=MyISAM” –password=”” test"></a>pt-find –engine InnoDB –exec “ALTER TABLE %D.%N ENGINE=MyISAM” –password=”” test<a class="article-anchor" href="#pt-find-–engine-InnoDB-–exec-“ALTER-TABLE-D-N-ENGINE-MyISAM”-–password-””-test" aria-hidden="true"></a></h5><p>找到InnoDB格式的数据表，并将其转化为MyISAM格式<br><img src="https://img-blog.csdn.net/20180708162829791?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h5 id="pt-find-–tablesize-1k-–password-sk-w1103-test" class="article-heading"><a href="#pt-find-–tablesize-1k-–password-sk-w1103-test" class="headerlink" title="pt-find –tablesize +1k –password=sk.w1103 test"></a>pt-find –tablesize +1k –password=sk.w1103 test<a class="article-anchor" href="#pt-find-–tablesize-1k-–password-sk-w1103-test" aria-hidden="true"></a></h5><p>寻找数据库test中，大于5k的表，并打印出来<br><img src="https://img-blog.csdn.net/20180708162834884?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h5 id="pt-find-–printf-“-T-t-D-N-n”-sort-rn" class="article-heading"><a href="#pt-find-–printf-“-T-t-D-N-n”-sort-rn" class="headerlink" title="pt-find –printf “%T\t%D.%N\n” | sort -rn"></a>pt-find –printf “%T\t%D.%N\n” | sort -rn<a class="article-anchor" href="#pt-find-–printf-“-T-t-D-N-n”-sort-rn" aria-hidden="true"></a></h5><p>找到所有表并打印它们的总数据和索引大小，并首先对最大的表进行排序<br><img src="https://img-blog.csdn.net/20180708162842529?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180708162922242?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h2 id="pt-summary" class="article-heading"><a href="#pt-summary" class="headerlink" title="pt-summary"></a>pt-summary<a class="article-anchor" href="#pt-summary" aria-hidden="true"></a></h2><h4 id="pt-summary-1" class="article-heading"><a href="#pt-summary-1" class="headerlink" title="pt-summary"></a>pt-summary<a class="article-anchor" href="#pt-summary-1" aria-hidden="true"></a></h4><p>查看当前系统的信息<br><img src="https://img-blog.csdn.net/20180708162935837?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h2 id="pt-heartbeat" class="article-heading"><a href="#pt-heartbeat" class="headerlink" title="pt-heartbeat"></a>pt-heartbeat<a class="article-anchor" href="#pt-heartbeat" aria-hidden="true"></a></h2><h4 id="pt-heartbeat-OPTIONS-DSN-–update-–monitor-–check-–stop" class="article-heading"><a href="#pt-heartbeat-OPTIONS-DSN-–update-–monitor-–check-–stop" class="headerlink" title="pt-heartbeat [OPTIONS] [DSN] –update|–monitor|–check|–stop"></a>pt-heartbeat [OPTIONS] [DSN] –update|–monitor|–check|–stop<a class="article-anchor" href="#pt-heartbeat-OPTIONS-DSN-–update-–monitor-–check-–stop" aria-hidden="true"></a></h4><p>监视MySQL的延迟操作</p>
<h2 id="pt-mysql-summary-OPTIONS" class="article-heading"><a href="#pt-mysql-summary-OPTIONS" class="headerlink" title="pt-mysql-summary [OPTIONS]"></a>pt-mysql-summary [OPTIONS]<a class="article-anchor" href="#pt-mysql-summary-OPTIONS" aria-hidden="true"></a></h2><p>查看当前MySQL的详细信息</p>
<h5 id="pt-mysql-summary-–p-sk-w1103" class="article-heading"><a href="#pt-mysql-summary-–p-sk-w1103" class="headerlink" title="pt-mysql-summary –p=sk.w1103"></a>pt-mysql-summary –p=sk.w1103<a class="article-anchor" href="#pt-mysql-summary-–p-sk-w1103" aria-hidden="true"></a></h5><p><img src="https://img-blog.csdn.net/20180708162945157?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h2 id="pt-fk-error-logger" class="article-heading"><a href="#pt-fk-error-logger" class="headerlink" title="pt-fk-error-logger"></a>pt-fk-error-logger<a class="article-anchor" href="#pt-fk-error-logger" aria-hidden="true"></a></h2><h4 id="pt-fk-error-logger-OPTIONS-DSN" class="article-heading"><a href="#pt-fk-error-logger-OPTIONS-DSN" class="headerlink" title="pt-fk-error-logger [OPTIONS] [DSN]"></a>pt-fk-error-logger [OPTIONS] [DSN]<a class="article-anchor" href="#pt-fk-error-logger-OPTIONS-DSN" aria-hidden="true"></a></h4><p>记录MySQL外键的错误信息</p>
<h2 id="pt-index-usage" class="article-heading"><a href="#pt-index-usage" class="headerlink" title="pt-index-usage"></a>pt-index-usage<a class="article-anchor" href="#pt-index-usage" aria-hidden="true"></a></h2><h4 id="pt-index-usage-OPTIONS-FILES" class="article-heading"><a href="#pt-index-usage-OPTIONS-FILES" class="headerlink" title="pt-index-usage [OPTIONS] [FILES]"></a>pt-index-usage [OPTIONS] [FILES]<a class="article-anchor" href="#pt-index-usage-OPTIONS-FILES" aria-hidden="true"></a></h4><p>从日志中读取查询并分析它们如何使用索引</p>
<h2 id="pt-query-digest" class="article-heading"><a href="#pt-query-digest" class="headerlink" title="pt-query-digest"></a>pt-query-digest<a class="article-anchor" href="#pt-query-digest" aria-hidden="true"></a></h2><h4 id="pt-query-digest-OPTIONS-FILES-DSN" class="article-heading"><a href="#pt-query-digest-OPTIONS-FILES-DSN" class="headerlink" title="pt-query-digest [OPTIONS] [FILES] [DSN]"></a>pt-query-digest [OPTIONS] [FILES] [DSN]<a class="article-anchor" href="#pt-query-digest-OPTIONS-FILES-DSN" aria-hidden="true"></a></h4><p>从日志，进程列表和tcpdump分析MySQL查询</p>
<h2 id="pt-pmp" class="article-heading"><a href="#pt-pmp" class="headerlink" title="pt-pmp"></a>pt-pmp<a class="article-anchor" href="#pt-pmp" aria-hidden="true"></a></h2><h4 id="pt-pmp-OPTIONS-FILES" class="article-heading"><a href="#pt-pmp-OPTIONS-FILES" class="headerlink" title="pt-pmp [OPTIONS] [FILES]"></a>pt-pmp [OPTIONS] [FILES]<a class="article-anchor" href="#pt-pmp-OPTIONS-FILES" aria-hidden="true"></a></h4><p>聚合所选程序的GDB堆栈跟踪</p>
<h2 id="pt-mext" class="article-heading"><a href="#pt-mext" class="headerlink" title="pt-mext"></a>pt-mext<a class="article-anchor" href="#pt-mext" aria-hidden="true"></a></h2><h4 id="pt-mext-OPTIONS-–-COMMAND" class="article-heading"><a href="#pt-mext-OPTIONS-–-COMMAND" class="headerlink" title="pt-mext [OPTIONS] – COMMAND"></a>pt-mext [OPTIONS] – COMMAND<a class="article-anchor" href="#pt-mext-OPTIONS-–-COMMAND" aria-hidden="true"></a></h4><p>查看MySQL 的SHOW GLOBAL STATUS的许多示例并排。</p>
<h2 id="pt-kill" class="article-heading"><a href="#pt-kill" class="headerlink" title="pt-kill"></a>pt-kill<a class="article-anchor" href="#pt-kill" aria-hidden="true"></a></h2><h4 id="pt-kill-OPTIONS-DSN" class="article-heading"><a href="#pt-kill-OPTIONS-DSN" class="headerlink" title="pt-kill [OPTIONS] [DSN]"></a>pt-kill [OPTIONS] [DSN]<a class="article-anchor" href="#pt-kill-OPTIONS-DSN" aria-hidden="true"></a></h4><p>杀死符合特定条件的MySQL查询</p>
<h5 id="pt-kill-–busy-time-60-–kill" class="article-heading"><a href="#pt-kill-–busy-time-60-–kill" class="headerlink" title="pt-kill –busy-time 60 –kill"></a>pt-kill –busy-time 60 –kill<a class="article-anchor" href="#pt-kill-–busy-time-60-–kill" aria-hidden="true"></a></h5><p>杀死查询时间大于60s的语句。</p>
<h5 id="pt-kill-–busy-time-60-–print" class="article-heading"><a href="#pt-kill-–busy-time-60-–print" class="headerlink" title="pt-kill –busy-time 60 –print"></a>pt-kill –busy-time 60 –print<a class="article-anchor" href="#pt-kill-–busy-time-60-–print" aria-hidden="true"></a></h5><p>打印但是不杀死查询时间大于60s的语句。</p>
<h5 id="pt-kill-–match-command-Sleep-–kill-–victims-all-–interval-10" class="article-heading"><a href="#pt-kill-–match-command-Sleep-–kill-–victims-all-–interval-10" class="headerlink" title="pt-kill –match-command Sleep –kill –victims all –interval 10"></a>pt-kill –match-command Sleep –kill –victims all –interval 10<a class="article-anchor" href="#pt-kill-–match-command-Sleep-–kill-–victims-all-–interval-10" aria-hidden="true"></a></h5><p>每过10s检查并杀死睡眠状态的进程。</p>
<h5 id="pt-kill-–match-state-login-–print-–victims-all" class="article-heading"><a href="#pt-kill-–match-state-login-–print-–victims-all" class="headerlink" title="pt-kill –match-state login –print –victims all"></a>pt-kill –match-state login –print –victims all<a class="article-anchor" href="#pt-kill-–match-state-login-–print-–victims-all" aria-hidden="true"></a></h5><p>打印但是不杀死所有进程。</p>
<p>常用参数说明<br>• no-version-check：不最新检查版本<br>• host：连接数据库的地址<br>• port：连接数据库的端口<br>• user：连接数据库的用户名<br>• passowrd：连接数据库的密码<br>• charset：指定字符集<br>• match-command：指定杀死的查询类型<br>• match-user：指定杀死的用户名,即杀死该用户的查询<br>• busy-time：指定杀死超过多少秒的查询<br>• kill：执行kill命令<br>• victims：表示从匹配的结果中选择,类似SQL中的where部分,all是全部的查询<br>• interal：每隔多少秒检查一次<br>• print：把kill的查询打印出来</p>
<h2 id="pt-ioprofile" class="article-heading"><a href="#pt-ioprofile" class="headerlink" title="pt-ioprofile"></a>pt-ioprofile<a class="article-anchor" href="#pt-ioprofile" aria-hidden="true"></a></h2><h4 id="pt-ioprofile-OPTIONS-FILE" class="article-heading"><a href="#pt-ioprofile-OPTIONS-FILE" class="headerlink" title="pt-ioprofile [OPTIONS] [FILE]"></a>pt-ioprofile [OPTIONS] [FILE]<a class="article-anchor" href="#pt-ioprofile-OPTIONS-FILE" aria-hidden="true"></a></h4><p>监视进程IO并打印文件表和I / O活动。</p>
<h2 id="pt-slave-find" class="article-heading"><a href="#pt-slave-find" class="headerlink" title="pt-slave-find"></a>pt-slave-find<a class="article-anchor" href="#pt-slave-find" aria-hidden="true"></a></h2><h4 id="pt-slave-find-OPTIONS-DSN" class="article-heading"><a href="#pt-slave-find-OPTIONS-DSN" class="headerlink" title="pt-slave-find [OPTIONS] [DSN]"></a>pt-slave-find [OPTIONS] [DSN]<a class="article-anchor" href="#pt-slave-find-OPTIONS-DSN" aria-hidden="true"></a></h4><p>查找并打印MySQL从属的复制层次结构树。</p>
<h2 id="pt-show-grants" class="article-heading"><a href="#pt-show-grants" class="headerlink" title="pt-show-grants"></a>pt-show-grants<a class="article-anchor" href="#pt-show-grants" aria-hidden="true"></a></h2><h4 id="pt-show-grants-OPTIONS-DSN" class="article-heading"><a href="#pt-show-grants-OPTIONS-DSN" class="headerlink" title="pt-show-grants [OPTIONS] [DSN]"></a>pt-show-grants [OPTIONS] [DSN]<a class="article-anchor" href="#pt-show-grants-OPTIONS-DSN" aria-hidden="true"></a></h4><p>规范化并打印MySQL授权，以便可以有效地复制，比较和版本控制它们。<br><img src="https://img-blog.csdn.net/20180708163011293?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzazExMDM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h2 id="pt-show-grants-–p-sk-w1103" class="article-heading"><a href="#pt-show-grants-–p-sk-w1103" class="headerlink" title="pt-show-grants –p=sk.w1103"></a>pt-show-grants –p=sk.w1103<a class="article-anchor" href="#pt-show-grants-–p-sk-w1103" aria-hidden="true"></a></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">打印MySQL的所有用户权限  </span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h2 id="pt-visual-explain" class="article-heading"><a href="#pt-visual-explain" class="headerlink" title="pt-visual-explain"></a>pt-visual-explain<a class="article-anchor" href="#pt-visual-explain" aria-hidden="true"></a></h2><h4 id="pt-visual-explain-OPTIONS-FILES" class="article-heading"><a href="#pt-visual-explain-OPTIONS-FILES" class="headerlink" title="pt-visual-explain [OPTIONS] [FILES]"></a>pt-visual-explain [OPTIONS] [FILES]<a class="article-anchor" href="#pt-visual-explain-OPTIONS-FILES" aria-hidden="true"></a></h4><p>将EXPLAIN输出格式化为树。</p>
<h2 id="pt-variable-advisor" class="article-heading"><a href="#pt-variable-advisor" class="headerlink" title="pt-variable-advisor"></a>pt-variable-advisor<a class="article-anchor" href="#pt-variable-advisor" aria-hidden="true"></a></h2><h4 id="pt-variable-advisor-OPTIONS-DSN" class="article-heading"><a href="#pt-variable-advisor-OPTIONS-DSN" class="headerlink" title="pt-variable-advisor [OPTIONS] [DSN]"></a>pt-variable-advisor [OPTIONS] [DSN]<a class="article-anchor" href="#pt-variable-advisor-OPTIONS-DSN" aria-hidden="true"></a></h4><p>分析MySQL变量并就可能出现的问题提出建议。</p>
<h2 id="pt-upgrade" class="article-heading"><a href="#pt-upgrade" class="headerlink" title="pt-upgrade"></a>pt-upgrade<a class="article-anchor" href="#pt-upgrade" aria-hidden="true"></a></h2><h4 id="pt-upgrade-OPTIONS-LOGS-RESULTS-DSN-DSN" class="article-heading"><a href="#pt-upgrade-OPTIONS-LOGS-RESULTS-DSN-DSN" class="headerlink" title="pt-upgrade [OPTIONS] LOGS|RESULTS DSN [DSN]"></a>pt-upgrade [OPTIONS] LOGS|RESULTS DSN [DSN]<a class="article-anchor" href="#pt-upgrade-OPTIONS-LOGS-RESULTS-DSN-DSN" aria-hidden="true"></a></h4><p>验证查询结果在不同服务器上是否相同。</p>
<h5 id="pt-upgrade-h-host1-h-host2-slow-log" class="article-heading"><a href="#pt-upgrade-h-host1-h-host2-slow-log" class="headerlink" title="pt-upgrade h=host1 h=host2 slow.log"></a>pt-upgrade h=host1 h=host2 slow.log<a class="article-anchor" href="#pt-upgrade-h-host1-h-host2-slow-log" aria-hidden="true"></a></h5><h2 id="pt-table-usage" class="article-heading"><a href="#pt-table-usage" class="headerlink" title="pt-table-usage"></a>pt-table-usage<a class="article-anchor" href="#pt-table-usage" aria-hidden="true"></a></h2><h4 id="pt-table-usage-OPTIONS-FILES" class="article-heading"><a href="#pt-table-usage-OPTIONS-FILES" class="headerlink" title="pt-table-usage [OPTIONS] [FILES]"></a>pt-table-usage [OPTIONS] [FILES]<a class="article-anchor" href="#pt-table-usage-OPTIONS-FILES" aria-hidden="true"></a></h4><p>分析查询如何使用表。</p>
<h2 id="pt-table-sync" class="article-heading"><a href="#pt-table-sync" class="headerlink" title="pt-table-sync"></a>pt-table-sync<a class="article-anchor" href="#pt-table-sync" aria-hidden="true"></a></h2><h4 id="pt-table-sync-OPTIONS-DSN-DSN" class="article-heading"><a href="#pt-table-sync-OPTIONS-DSN-DSN" class="headerlink" title="pt-table-sync [OPTIONS] DSN [DSN]"></a>pt-table-sync [OPTIONS] DSN [DSN]<a class="article-anchor" href="#pt-table-sync-OPTIONS-DSN-DSN" aria-hidden="true"></a></h4><p>有效地同步MySQL表数据。使用对两个库不一致的数据进行同步，他能够自动发现两个实例间不一致的数据，然后进行sync操作，pt-table-sync无法同步表结构，和索引等对象，只能同步数据。</p>
<h5 id="pt-table-sync-–execute-h-host1-D-db-t-tbl-h-host2" class="article-heading"><a href="#pt-table-sync-–execute-h-host1-D-db-t-tbl-h-host2" class="headerlink" title="pt-table-sync –execute h=host1,D=db,t=tbl h=host2"></a>pt-table-sync –execute h=host1,D=db,t=tbl h=host2<a class="article-anchor" href="#pt-table-sync-–execute-h-host1-D-db-t-tbl-h-host2" aria-hidden="true"></a></h5><p>同步数据库中表1到另外数据库的表1数据</p>
<h5 id="pt-table-sync-–execute-host1-host2-host3" class="article-heading"><a href="#pt-table-sync-–execute-host1-host2-host3" class="headerlink" title="pt-table-sync –execute host1 host2 host3"></a>pt-table-sync –execute host1 host2 host3<a class="article-anchor" href="#pt-table-sync-–execute-host1-host2-host3" aria-hidden="true"></a></h5><p>将host1上的所有表同步到host2和host3：</p>
<h5 id="pt-table-sync-–execute-–sync-to-master-slave1" class="article-heading"><a href="#pt-table-sync-–execute-–sync-to-master-slave1" class="headerlink" title="pt-table-sync –execute –sync-to-master slave1"></a>pt-table-sync –execute –sync-to-master slave1<a class="article-anchor" href="#pt-table-sync-–execute-–sync-to-master-slave1" aria-hidden="true"></a></h5><p>使slave1具有与其复制主机相同的数据</p>
<h5 id="pt-table-sync-–execute-–replicate-test-checksum-master1" class="article-heading"><a href="#pt-table-sync-–execute-–replicate-test-checksum-master1" class="headerlink" title="pt-table-sync –execute –replicate test.checksum master1"></a>pt-table-sync –execute –replicate test.checksum master1<a class="article-anchor" href="#pt-table-sync-–execute-–replicate-test-checksum-master1" aria-hidden="true"></a></h5><p>解决test.checksum在master1的所有从站上发现的差异</p>
<h5 id="pt-table-sync-–execute-–replicate-test-checksum-–sync-to-master-slave1" class="article-heading"><a href="#pt-table-sync-–execute-–replicate-test-checksum-–sync-to-master-slave1" class="headerlink" title="pt-table-sync –execute –replicate test.checksum –sync-to-master slave1"></a>pt-table-sync –execute –replicate test.checksum –sync-to-master slave1<a class="article-anchor" href="#pt-table-sync-–execute-–replicate-test-checksum-–sync-to-master-slave1" aria-hidden="true"></a></h5><p>与上面相同，但仅解决slave1上的差异</p>
<h5 id="pt-table-sync-–execute-–sync-to-master-h-master2-D-db-t-tbl" class="article-heading"><a href="#pt-table-sync-–execute-–sync-to-master-h-master2-D-db-t-tbl" class="headerlink" title="pt-table-sync –execute –sync-to-master h=master2,D=db,t=tbl"></a>pt-table-sync –execute –sync-to-master h=master2,D=db,t=tbl<a class="article-anchor" href="#pt-table-sync-–execute-–sync-to-master-h-master2-D-db-t-tbl" aria-hidden="true"></a></h5><p>在master-master复制配置中同步master2</p>
<h5 id="pt-table-sync-–execute-h-master1-D-db-t-tbl-master2" class="article-heading"><a href="#pt-table-sync-–execute-h-master1-D-db-t-tbl-master2" class="headerlink" title="pt-table-sync –execute h=master1,D=db,t=tbl master2"></a>pt-table-sync –execute h=master1,D=db,t=tbl master2<a class="article-anchor" href="#pt-table-sync-–execute-h-master1-D-db-t-tbl-master2" aria-hidden="true"></a></h5><p>同步所有库和表</p>
<h5 id="pt-table-sync-–charset-utf8-–ignore-databases-mysql-sys-percona-u-root-p-root-h-host1-P-3306-u-root-p-root-h-host2-P-3306-–execute-–print" class="article-heading"><a href="#pt-table-sync-–charset-utf8-–ignore-databases-mysql-sys-percona-u-root-p-root-h-host1-P-3306-u-root-p-root-h-host2-P-3306-–execute-–print" class="headerlink" title="pt-table-sync –charset=utf8 –ignore-databases=mysql,sys,percona u=root,p=root,h=host1,P=3306 u=root,p=root,h=host2,P=3306 –execute –print"></a>pt-table-sync –charset=utf8 –ignore-databases=mysql,sys,percona u=root,p=root,h=host1,P=3306 u=root,p=root,h=host2,P=3306 –execute –print<a class="article-anchor" href="#pt-table-sync-–charset-utf8-–ignore-databases-mysql-sys-percona-u-root-p-root-h-host1-P-3306-u-root-p-root-h-host2-P-3306-–execute-–print" aria-hidden="true"></a></h5><p>忽略库<br>–ignore-databases=指定要忽略的库</p>
<h2 id="pt-table-checksum" class="article-heading"><a href="#pt-table-checksum" class="headerlink" title="pt-table-checksum"></a>pt-table-checksum<a class="article-anchor" href="#pt-table-checksum" aria-hidden="true"></a></h2><h4 id="pt-table-checksum-OPTIONS-DSN" class="article-heading"><a href="#pt-table-checksum-OPTIONS-DSN" class="headerlink" title="pt-table-checksum [OPTIONS] [DSN]"></a>pt-table-checksum [OPTIONS] [DSN]<a class="article-anchor" href="#pt-table-checksum-OPTIONS-DSN" aria-hidden="true"></a></h4><p>主要用来检查主从数据是否一致，</p>
<h2 id="pt-table-checksum-1" class="article-heading"><a href="#pt-table-checksum-1" class="headerlink" title="pt-table-checksum"></a>pt-table-checksum<a class="article-anchor" href="#pt-table-checksum-1" aria-hidden="true"></a></h2><p>通过在主服务器上执行校验和查询来执行在线复制一致性检查，这会在与主服务器不一致的副本上生成不同的结果。可选DSN指定主主机。如果发现任何差异，或者发生任何警告或错误，则工具的“退出状态”不为零。以上命令将连接到localhost上的复制主机，每个表的校验和，并在每个检测到的副本上报告结果</p>
<h2 id="pt-stalk" class="article-heading"><a href="#pt-stalk" class="headerlink" title="pt-stalk"></a>pt-stalk<a class="article-anchor" href="#pt-stalk" aria-hidden="true"></a></h2><h4 id="pt-stalk-OPTIONS" class="article-heading"><a href="#pt-stalk-OPTIONS" class="headerlink" title="pt-stalk [OPTIONS]"></a>pt-stalk [OPTIONS]<a class="article-anchor" href="#pt-stalk-OPTIONS" aria-hidden="true"></a></h4><p>出现问题时收集有关MySQL的取证数据</p>
<h2 id="pt-slave-restart" class="article-heading"><a href="#pt-slave-restart" class="headerlink" title="pt-slave-restart"></a>pt-slave-restart<a class="article-anchor" href="#pt-slave-restart" aria-hidden="true"></a></h2><h4 id="pt-slave-restart-OPTIONS-DSN" class="article-heading"><a href="#pt-slave-restart-OPTIONS-DSN" class="headerlink" title="pt-slave-restart [OPTIONS] [DSN]"></a>pt-slave-restart [OPTIONS] [DSN]<a class="article-anchor" href="#pt-slave-restart-OPTIONS-DSN" aria-hidden="true"></a></h4><p>在发生错误后，重启MySQL。</p>
<h2 id="pt-slave-delay" class="article-heading"><a href="#pt-slave-delay" class="headerlink" title="pt-slave-delay"></a>pt-slave-delay<a class="article-anchor" href="#pt-slave-delay" aria-hidden="true"></a></h2><h4 id="pt-slave-delay-OPTIONS-SLAVE-DSN-MASTER-DSN" class="article-heading"><a href="#pt-slave-delay-OPTIONS-SLAVE-DSN-MASTER-DSN" class="headerlink" title="pt-slave-delay [OPTIONS] SLAVE_DSN [MASTER_DSN]"></a>pt-slave-delay [OPTIONS] SLAVE_DSN [MASTER_DSN]<a class="article-anchor" href="#pt-slave-delay-OPTIONS-SLAVE-DSN-MASTER-DSN" aria-hidden="true"></a></h4><p>使从库的数据比主库的数据落后。</p>
<h5 id="pt-slave-delay-–delay-1m-–interval-15s-–run-time-10m-slavehost" class="article-heading"><a href="#pt-slave-delay-–delay-1m-–interval-15s-–run-time-10m-slavehost" class="headerlink" title="pt-slave-delay –delay 1m –interval 15s –run-time 10m slavehost"></a>pt-slave-delay –delay 1m –interval 15s –run-time 10m slavehost<a class="article-anchor" href="#pt-slave-delay-–delay-1m-–interval-15s-–run-time-10m-slavehost" aria-hidden="true"></a></h5><p>根据需要启动和停止从属服务器，使其落后于主服务器</p>
<h2 id="pt-sift" class="article-heading"><a href="#pt-sift" class="headerlink" title="pt-sift"></a>pt-sift<a class="article-anchor" href="#pt-sift" aria-hidden="true"></a></h2><h4 id="pt-sift-FILE-PREFIX-DIRECTORY" class="article-heading"><a href="#pt-sift-FILE-PREFIX-DIRECTORY" class="headerlink" title="pt-sift FILE|PREFIX|DIRECTORY"></a>pt-sift FILE|PREFIX|DIRECTORY<a class="article-anchor" href="#pt-sift-FILE-PREFIX-DIRECTORY" aria-hidden="true"></a></h4><p>浏览由pt-stalk创建的文件</p>
<h2 id="DSN" class="article-heading"><a href="#DSN" class="headerlink" title="DSN"></a>DSN<a class="article-anchor" href="#DSN" aria-hidden="true"></a></h2><p>DSN的详细参数：<br>a:查询<br>A:字符集<br>b：true代表禁用binlog<br>D：数据库<br>u：数据库链接账号<br>p：数据库链接密码<br>h：主机IP<br>F：配置文件位置<br>i：是否使用某索引<br>m：插件模块<br>P：端口号<br>S：socket文件<br>t：表</p>
<h2 id="OPTIONS" class="article-heading"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS<a class="article-anchor" href="#OPTIONS" aria-hidden="true"></a></h2><h5 id="–ask-pass" class="article-heading"><a href="#–ask-pass" class="headerlink" title="–ask-pass"></a>–ask-pass<a class="article-anchor" href="#–ask-pass" aria-hidden="true"></a></h5><p>连接数据库的时候提示密码</p>
<h5 id="–charset" class="article-heading"><a href="#–charset" class="headerlink" title="–charset"></a>–charset<a class="article-anchor" href="#–charset" aria-hidden="true"></a></h5><p>类型：string<br>简写 –A<br>字符类似设置</p>
<h5 id="–config" class="article-heading"><a href="#–config" class="headerlink" title="–config"></a>–config<a class="article-anchor" href="#–config" aria-hidden="true"></a></h5><p>类型：数组<br>配置文件。如果该值为必须的情况下，必须放在命令首位（相当于default-file）。</p>
<h5 id="–database" class="article-heading"><a href="#–database" class="headerlink" title="–database"></a>–database<a class="article-anchor" href="#–database" aria-hidden="true"></a></h5><p>类型：string<br>简写：-D<br>连接数据库</p>
<h5 id="–defaults-file" class="article-heading"><a href="#–defaults-file" class="headerlink" title="–defaults-file"></a>–defaults-file<a class="article-anchor" href="#–defaults-file" aria-hidden="true"></a></h5><p>简写：-F<br>类型：string<br>仅从给定文件中读取mysql选项。必须提供绝对路径名。</p>
<h5 id="–help" class="article-heading"><a href="#–help" class="headerlink" title="–help"></a>–help<a class="article-anchor" href="#–help" aria-hidden="true"></a></h5><p>帮助并退出</p>
<h5 id="–host" class="article-heading"><a href="#–host" class="headerlink" title="–host"></a>–host<a class="article-anchor" href="#–host" aria-hidden="true"></a></h5><p>类型：string<br>简写：-h<br>连接地址</p>
<h5 id="–-no-ignore-case" class="article-heading"><a href="#–-no-ignore-case" class="headerlink" title="–[no]ignore-case"></a>–[no]ignore-case<a class="article-anchor" href="#–-no-ignore-case" aria-hidden="true"></a></h5><p>对比变量的时候忽略大小写。</p>
<h5 id="–ignore-variables" class="article-heading"><a href="#–ignore-variables" class="headerlink" title="–ignore-variables"></a>–ignore-variables<a class="article-anchor" href="#–ignore-variables" aria-hidden="true"></a></h5><p>类型：数组<br>忽略，并不进行比较</p>
<h5 id="–password" class="article-heading"><a href="#–password" class="headerlink" title="–password"></a>–password<a class="article-anchor" href="#–password" aria-hidden="true"></a></h5><p>类型：string<br>简写：-p<br>连接密码</p>
<h5 id="–port" class="article-heading"><a href="#–port" class="headerlink" title="–port"></a>–port<a class="article-anchor" href="#–port" aria-hidden="true"></a></h5><p>类型：int<br>简写：-P<br>连接端口</p>
<h5 id="–-no-report" class="article-heading"><a href="#–-no-report" class="headerlink" title="–[no]report"></a>–[no]report<a class="article-anchor" href="#–-no-report" aria-hidden="true"></a></h5><p>将对比不同的报告写到磁盘中。</p>
<h5 id="–socket" class="article-heading"><a href="#–socket" class="headerlink" title="–socket"></a>–socket<a class="article-anchor" href="#–socket" aria-hidden="true"></a></h5><p>类型：string<br>简写：-S<br>套接字连接</p>
<h5 id="–user" class="article-heading"><a href="#–user" class="headerlink" title="–user"></a>–user<a class="article-anchor" href="#–user" aria-hidden="true"></a></h5><p>类型：string<br>简写：-u<br>用户名</p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2020-10-19T06:38:03.916Z" itemprop="dateModified">上次更新：2020-10-19</time>
                <a href="/mysql/index.html" class="article-footer-next" title="概览"><span>下一页</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'toberoot';
  var disqus_url = 'http://www.toberoot.com/mysql/awesome-tools/percona_tookit.html';
  var disqus_title = "percona toolkit";
  var disqus_config = function(){
    this.language = 'zh';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              
<div id="carbonads">
<span>
<span class="carbon-wrap">
<a href="https://github.com/booboowei" class="carbon-img" target="_blank" rel="noopener sponsored external nofollow noreferrer">
    <img src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
    alt="ads via Carbon" border="0" style="max-width: 130px;">
</a>
<a href="/about/" class="carbon-text" target="_blank" rel="noopener sponsored">除了自己的无知，我什么都不知道</a>
</span>
</span>

              <strong class="sidebar-title">目录</strong>
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#percona-toolkit-%E7%AE%80%E4%BB%8B"><span class="toc-text">percona toolkit 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8linux%EF%BC%88centOS%EF%BC%89%E4%B8%8A%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%EF%BC%9Ayum-install-y-percona-toolkit"><span class="toc-text">在linux（centOS）上安装软件：yum install -y percona-toolkit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%87%E6%B3%A8%EF%BC%9A%E5%9F%BA%E6%9C%AC%E6%89%80%E6%9C%89%E6%B6%89%E5%8F%8A%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E9%83%BD%E9%9C%80%E8%A6%81%E5%A1%AB%E5%86%99%E7%9B%B8%E5%BA%94%E7%9A%84DNS%E5%91%BD%E4%BB%A4%EF%BC%8C%E4%BE%8B%E5%A6%82%E7%94%A8%E6%88%B7%E5%90%8D%EF%BC%8C%E5%AF%86%E7%A0%81%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%AD%89%E7%AD%89%E3%80%82"><span class="toc-text">备注：基本所有涉及到数据库的操作，都需要填写相应的DNS命令，例如用户名，密码，数据库，数据库表等等。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-align"><span class="toc-text">pt-align</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-align-files"><span class="toc-text">pt-align [files]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-archiver"><span class="toc-text">pt-archiver</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-archiver-OPTIONS-%E2%80%93source-DSN-%E2%80%93where-WHERE"><span class="toc-text">pt-archiver [OPTIONS] –source DSN –where WHERE</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-online-schema-change"><span class="toc-text">pt-online-schema-change</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-online-schema-change-OPTIONS-DNS"><span class="toc-text">pt-online-schema-change [OPTIONS] DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-online-schema-change-%E2%80%93alter-%E2%80%9Cadd-column-col-int-11-Default-null%E2%80%9D-h-host-P-3306-D-db-t-table-u-username-p-password-%E2%80%93execute"><span class="toc-text">pt-online-schema-change –alter “add column col int(11) Default null” h&#x3D;host,P&#x3D;3306,D&#x3D;db,t&#x3D;table,u&#x3D;username,p&#x3D;password –execute</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-config-diff"><span class="toc-text">pt-config-diff</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-config-diff-OPTIONS-CONFIG-CONFIG-CONFIG%E2%80%A6"><span class="toc-text">pt-config-diff [OPTIONS] CONFIG CONFIG [CONFIG…]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-config-diff-h-host1-h-host2"><span class="toc-text">pt-config-diff h&#x3D;host1 h&#x3D;host2</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-config-diff-etc-my-cof-h-host2"><span class="toc-text">pt-config-diff &#x2F;etc&#x2F;my.cof h&#x3D;host2</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-config-diff-etc-my-cof-etc-wsk-cof"><span class="toc-text">pt-config-diff &#x2F;etc&#x2F;my.cof &#x2F;etc&#x2F;wsk.cof</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-deadlock-logger"><span class="toc-text">pt-deadlock-logger</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-deadlock-logger-OPTIONS-DSN"><span class="toc-text">pt-deadlock-logger [OPTIONS] DSN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-deadlock-logger-h-host1"><span class="toc-text">pt-deadlock-logger h&#x3D;host1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-deadlock-logger-h-host1-%E2%80%93iterations-1"><span class="toc-text">pt-deadlock-logger h&#x3D;host1 –iterations 1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-deadlock-logger-h-host1-%E2%80%93dest-h-host2-D-percona-schema-t-deadlocks"><span class="toc-text">pt-deadlock-logger h&#x3D;host1 –dest h&#x3D;host2,D&#x3D;percona_schema,t&#x3D;deadlocks</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-diskstats"><span class="toc-text">pt-diskstats</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-diskstats-1"><span class="toc-text">pt-diskstats</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-duplicate-key-checker"><span class="toc-text">pt-duplicate-key-checker</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-duplicate-key-checker-OPTIONS-DNS"><span class="toc-text">pt-duplicate-key-checker [OPTIONS] [DNS]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-fifo-split"><span class="toc-text">pt-fifo-split</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-fifo-split-OPTIONS-FILE"><span class="toc-text">pt-fifo-split [OPTIONS] [FILE]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-fifo-split-%E2%80%93lines-1000000-hugefile-txt"><span class="toc-text">pt-fifo-split –lines 1000000 hugefile.txt</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-find"><span class="toc-text">pt-find</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-find-OPTIONS-DATABASES"><span class="toc-text">pt-find [OPTIONS] [DATABASES]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-find-%E2%80%93ctime-0-%E2%80%93engine-InnoDB-%E2%80%93password-sk-w1103"><span class="toc-text">pt-find –ctime +0 –engine InnoDB –password&#x3D;sk.w1103</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-find-%E2%80%93engine-InnoDB-%E2%80%93exec-%E2%80%9CALTER-TABLE-D-N-ENGINE-MyISAM%E2%80%9D-%E2%80%93password-%E2%80%9D%E2%80%9D-test"><span class="toc-text">pt-find –engine InnoDB –exec “ALTER TABLE %D.%N ENGINE&#x3D;MyISAM” –password&#x3D;”” test</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-find-%E2%80%93tablesize-1k-%E2%80%93password-sk-w1103-test"><span class="toc-text">pt-find –tablesize +1k –password&#x3D;sk.w1103 test</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-find-%E2%80%93printf-%E2%80%9C-T-t-D-N-n%E2%80%9D-sort-rn"><span class="toc-text">pt-find –printf “%T\t%D.%N\n” | sort -rn</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-summary"><span class="toc-text">pt-summary</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-summary-1"><span class="toc-text">pt-summary</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-heartbeat"><span class="toc-text">pt-heartbeat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-heartbeat-OPTIONS-DSN-%E2%80%93update-%E2%80%93monitor-%E2%80%93check-%E2%80%93stop"><span class="toc-text">pt-heartbeat [OPTIONS] [DSN] –update|–monitor|–check|–stop</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-mysql-summary-OPTIONS"><span class="toc-text">pt-mysql-summary [OPTIONS]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-mysql-summary-%E2%80%93p-sk-w1103"><span class="toc-text">pt-mysql-summary –p&#x3D;sk.w1103</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-fk-error-logger"><span class="toc-text">pt-fk-error-logger</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-fk-error-logger-OPTIONS-DSN"><span class="toc-text">pt-fk-error-logger [OPTIONS] [DSN]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-index-usage"><span class="toc-text">pt-index-usage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-index-usage-OPTIONS-FILES"><span class="toc-text">pt-index-usage [OPTIONS] [FILES]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-query-digest"><span class="toc-text">pt-query-digest</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-query-digest-OPTIONS-FILES-DSN"><span class="toc-text">pt-query-digest [OPTIONS] [FILES] [DSN]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-pmp"><span class="toc-text">pt-pmp</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-pmp-OPTIONS-FILES"><span class="toc-text">pt-pmp [OPTIONS] [FILES]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-mext"><span class="toc-text">pt-mext</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-mext-OPTIONS-%E2%80%93-COMMAND"><span class="toc-text">pt-mext [OPTIONS] – COMMAND</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-kill"><span class="toc-text">pt-kill</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-kill-OPTIONS-DSN"><span class="toc-text">pt-kill [OPTIONS] [DSN]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-kill-%E2%80%93busy-time-60-%E2%80%93kill"><span class="toc-text">pt-kill –busy-time 60 –kill</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-kill-%E2%80%93busy-time-60-%E2%80%93print"><span class="toc-text">pt-kill –busy-time 60 –print</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-kill-%E2%80%93match-command-Sleep-%E2%80%93kill-%E2%80%93victims-all-%E2%80%93interval-10"><span class="toc-text">pt-kill –match-command Sleep –kill –victims all –interval 10</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-kill-%E2%80%93match-state-login-%E2%80%93print-%E2%80%93victims-all"><span class="toc-text">pt-kill –match-state login –print –victims all</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-ioprofile"><span class="toc-text">pt-ioprofile</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-ioprofile-OPTIONS-FILE"><span class="toc-text">pt-ioprofile [OPTIONS] [FILE]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-slave-find"><span class="toc-text">pt-slave-find</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-slave-find-OPTIONS-DSN"><span class="toc-text">pt-slave-find [OPTIONS] [DSN]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-show-grants"><span class="toc-text">pt-show-grants</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-show-grants-OPTIONS-DSN"><span class="toc-text">pt-show-grants [OPTIONS] [DSN]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-show-grants-%E2%80%93p-sk-w1103"><span class="toc-text">pt-show-grants –p&#x3D;sk.w1103</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-visual-explain"><span class="toc-text">pt-visual-explain</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-visual-explain-OPTIONS-FILES"><span class="toc-text">pt-visual-explain [OPTIONS] [FILES]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-variable-advisor"><span class="toc-text">pt-variable-advisor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-variable-advisor-OPTIONS-DSN"><span class="toc-text">pt-variable-advisor [OPTIONS] [DSN]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-upgrade"><span class="toc-text">pt-upgrade</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-upgrade-OPTIONS-LOGS-RESULTS-DSN-DSN"><span class="toc-text">pt-upgrade [OPTIONS] LOGS|RESULTS DSN [DSN]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-upgrade-h-host1-h-host2-slow-log"><span class="toc-text">pt-upgrade h&#x3D;host1 h&#x3D;host2 slow.log</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-table-usage"><span class="toc-text">pt-table-usage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-table-usage-OPTIONS-FILES"><span class="toc-text">pt-table-usage [OPTIONS] [FILES]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-table-sync"><span class="toc-text">pt-table-sync</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-table-sync-OPTIONS-DSN-DSN"><span class="toc-text">pt-table-sync [OPTIONS] DSN [DSN]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93execute-h-host1-D-db-t-tbl-h-host2"><span class="toc-text">pt-table-sync –execute h&#x3D;host1,D&#x3D;db,t&#x3D;tbl h&#x3D;host2</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93execute-host1-host2-host3"><span class="toc-text">pt-table-sync –execute host1 host2 host3</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93execute-%E2%80%93sync-to-master-slave1"><span class="toc-text">pt-table-sync –execute –sync-to-master slave1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93execute-%E2%80%93replicate-test-checksum-master1"><span class="toc-text">pt-table-sync –execute –replicate test.checksum master1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93execute-%E2%80%93replicate-test-checksum-%E2%80%93sync-to-master-slave1"><span class="toc-text">pt-table-sync –execute –replicate test.checksum –sync-to-master slave1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93execute-%E2%80%93sync-to-master-h-master2-D-db-t-tbl"><span class="toc-text">pt-table-sync –execute –sync-to-master h&#x3D;master2,D&#x3D;db,t&#x3D;tbl</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93execute-h-master1-D-db-t-tbl-master2"><span class="toc-text">pt-table-sync –execute h&#x3D;master1,D&#x3D;db,t&#x3D;tbl master2</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-table-sync-%E2%80%93charset-utf8-%E2%80%93ignore-databases-mysql-sys-percona-u-root-p-root-h-host1-P-3306-u-root-p-root-h-host2-P-3306-%E2%80%93execute-%E2%80%93print"><span class="toc-text">pt-table-sync –charset&#x3D;utf8 –ignore-databases&#x3D;mysql,sys,percona u&#x3D;root,p&#x3D;root,h&#x3D;host1,P&#x3D;3306 u&#x3D;root,p&#x3D;root,h&#x3D;host2,P&#x3D;3306 –execute –print</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-table-checksum"><span class="toc-text">pt-table-checksum</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-table-checksum-OPTIONS-DSN"><span class="toc-text">pt-table-checksum [OPTIONS] [DSN]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-table-checksum-1"><span class="toc-text">pt-table-checksum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-stalk"><span class="toc-text">pt-stalk</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-stalk-OPTIONS"><span class="toc-text">pt-stalk [OPTIONS]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-slave-restart"><span class="toc-text">pt-slave-restart</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-slave-restart-OPTIONS-DSN"><span class="toc-text">pt-slave-restart [OPTIONS] [DSN]</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-slave-delay"><span class="toc-text">pt-slave-delay</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-slave-delay-OPTIONS-SLAVE-DSN-MASTER-DSN"><span class="toc-text">pt-slave-delay [OPTIONS] SLAVE_DSN [MASTER_DSN]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pt-slave-delay-%E2%80%93delay-1m-%E2%80%93interval-15s-%E2%80%93run-time-10m-slavehost"><span class="toc-text">pt-slave-delay –delay 1m –interval 15s –run-time 10m slavehost</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pt-sift"><span class="toc-text">pt-sift</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pt-sift-FILE-PREFIX-DIRECTORY"><span class="toc-text">pt-sift FILE|PREFIX|DIRECTORY</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DSN"><span class="toc-text">DSN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OPTIONS"><span class="toc-text">OPTIONS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93ask-pass"><span class="toc-text">–ask-pass</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93charset"><span class="toc-text">–charset</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93config"><span class="toc-text">–config</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93database"><span class="toc-text">–database</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93defaults-file"><span class="toc-text">–defaults-file</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93help"><span class="toc-text">–help</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93host"><span class="toc-text">–host</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93-no-ignore-case"><span class="toc-text">–[no]ignore-case</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93ignore-variables"><span class="toc-text">–ignore-variables</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93password"><span class="toc-text">–password</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93port"><span class="toc-text">–port</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93-no-report"><span class="toc-text">–[no]report</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93socket"><span class="toc-text">–socket</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93user"><span class="toc-text">–user</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>
              <a href="#" id="article-toc-top">回到顶部</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">开始使用</strong><a href="/mysql/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">MySQL 基础</strong><a href="/mysql/booboo_mysql/index.html" class="sidebar-link">概览</a><a href="/mysql/booboo_mysql/00-MySQL管理课程简介.html" class="sidebar-link">课程简介</a><a href="/mysql/booboo_mysql/01-MySQL和MariaDB数据库介绍.html" class="sidebar-link">MySQL简介</a><a href="/mysql/booboo_mysql/02-结构化查询语言SQL介绍和基本操作.html" class="sidebar-link">SQL基础上</a><a href="/mysql/booboo_mysql/02-结构化查询语言SQL介绍和基本操作2.html" class="sidebar-link">SQL基础下</a><a href="/mysql/booboo_mysql/03-MySQL备份与恢复.html" class="sidebar-link">备份与恢复</a><a href="/mysql/booboo_mysql/03-MySQL逻辑架构和Innodb存储引擎.html" class="sidebar-link">存储引擎</a><a href="/mysql/booboo_mysql/04-MySQL复制replication.html" class="sidebar-link">主从复制</a><a href="/mysql/booboo_mysql/05-MySQL高可用HA.html" class="sidebar-link">高可用HA</a><a href="/mysql/booboo_mysql/06-MySQL压力测试工具sysbench.html" class="sidebar-link">压力测试</a><a href="/mysql/booboo_mysql/07-MySQL5.6一主多从半同步复制.html" class="sidebar-link">半同步复制</a><a href="/mysql/booboo_mysql/08-MySQL逻辑备份工具mysqldump&mysqlpump&mydumper.html" class="sidebar-link">逻辑备份工具对比</a><a href="/mysql/booboo_mysql/09-SQL考试.html" class="sidebar-link">基础考试</a><strong class="sidebar-title">MySQL 运维实践</strong><a href="/mysql/dba_mysql/index.html" class="sidebar-link">概览</a><a href="/mysql/dba_mysql/00-MySQL软件推荐.html" class="sidebar-link">MySQL软件推荐</a><a href="/mysql/dba_mysql/01-MySQL常用SQL.html" class="sidebar-link">MySQL常用SQL</a><a href="/mysql/dba_mysql/02-MySQL参数优化.html" class="sidebar-link">MySQL参数优化</a><a href="/mysql/dba_mysql/03-MySQL认证OCP.html" class="sidebar-link">MySQL认证OCP</a><a href="/mysql/dba_mysql/04-MySQL技术积累.html" class="sidebar-link">MySQL技术积累</a><a href="/mysql/dba_mysql/05-MySQL自动化管理.html" class="sidebar-link">MySQL自动化管理</a><a href="/mysql/dba_mysql/06-MySQL性能监控.html" class="sidebar-link">06-MySQL性能监控</a><a href="/mysql/dba_mysql/mycat/基于MyCat的MySQL高可用架构规划建议.html" class="sidebar-link">分布式架构规划</a><a href="/mysql/dba_mysql/mycat/基于MyCAT的分布式数据库架构.html" class="sidebar-link">分布式架构配置</a><strong class="sidebar-title">安全篇</strong><a href="/mysql/security/index.html" class="sidebar-link">概览</a><a href="/mysql/security/cis_mysql.html" class="sidebar-link">MySQL安全基线</a><strong class="sidebar-title">工具篇</strong><a href="/mysql/awesome-tools/index.html" class="sidebar-link">概览</a><a href="/mysql/awesome-tools/pt-archiver.html" class="sidebar-link">pt-archiver</a><a href="/mysql/awesome-tools/pt-percona_tookit.html" class="sidebar-link">percona_tookit</a><a href="/mysql/awesome-tools/workbench.html" class="sidebar-link">workbench</a><a href="/mysql/awesome-tools/otter/Otter实现上海美国异地机房双向同步.html" class="sidebar-link">otter</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2020 <a href="https://github.com/hexojs/hexo/graphs/contributors" rel="external nofollow noreferrer" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="https://choosealicense.com/licenses/agpl-3.0/" rel="external nofollow noreferrer" target="_blank">GNU AGPLv3</a><br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://github.com/BoobooWei" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
      <a target="_blank" href="http://exam.toberoot.com/" rel="external nofollow noreferrer noopener">在线测评系统</a><
      <a href="https://www.huangjingxue.com/" rel="external nofollow noreferrer" target="_blank">衾袭</a><
      <a href="https://husky-wu.github.io/" rel="external nofollow noreferrer" target="_blank">明夋</a><
      <a href="https://footman-ljn.github.io/" rel="external nofollow noreferrer" target="_blank">伊斯</a>
    </div>
  </div>
  <br>
  <div class="inner">
  </div>

</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/api/" class="mobile-nav-link">MySQL8.0</a><a href="/mse/" class="mobile-nav-link">MSE</a><a href="/linux/" class="mobile-nav-link">Linux</a><a href="/mysql/" class="mobile-nav-link">MySQL</a><a href="/oracle/" class="mobile-nav-link">Oracle</a><a href="/nosql/" class="mobile-nav-link">NoSQL</a><a href="/devops/" class="mobile-nav-link">DevOps</a><a href="/git/" class="mobile-nav-link">Git</a><a href="/cloud/" class="mobile-nav-link">Cloud</a><a href="/news/" class="mobile-nav-link">News</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">开始使用</strong><a href="/mysql/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">MySQL 基础</strong><a href="/mysql/booboo_mysql/index.html" class="mobile-nav-link">概览</a><a href="/mysql/booboo_mysql/00-MySQL管理课程简介.html" class="mobile-nav-link">课程简介</a><a href="/mysql/booboo_mysql/01-MySQL和MariaDB数据库介绍.html" class="mobile-nav-link">MySQL简介</a><a href="/mysql/booboo_mysql/02-结构化查询语言SQL介绍和基本操作.html" class="mobile-nav-link">SQL基础上</a><a href="/mysql/booboo_mysql/02-结构化查询语言SQL介绍和基本操作2.html" class="mobile-nav-link">SQL基础下</a><a href="/mysql/booboo_mysql/03-MySQL备份与恢复.html" class="mobile-nav-link">备份与恢复</a><a href="/mysql/booboo_mysql/03-MySQL逻辑架构和Innodb存储引擎.html" class="mobile-nav-link">存储引擎</a><a href="/mysql/booboo_mysql/04-MySQL复制replication.html" class="mobile-nav-link">主从复制</a><a href="/mysql/booboo_mysql/05-MySQL高可用HA.html" class="mobile-nav-link">高可用HA</a><a href="/mysql/booboo_mysql/06-MySQL压力测试工具sysbench.html" class="mobile-nav-link">压力测试</a><a href="/mysql/booboo_mysql/07-MySQL5.6一主多从半同步复制.html" class="mobile-nav-link">半同步复制</a><a href="/mysql/booboo_mysql/08-MySQL逻辑备份工具mysqldump&mysqlpump&mydumper.html" class="mobile-nav-link">逻辑备份工具对比</a><a href="/mysql/booboo_mysql/09-SQL考试.html" class="mobile-nav-link">基础考试</a><strong class="mobile-nav-title">MySQL 运维实践</strong><a href="/mysql/dba_mysql/index.html" class="mobile-nav-link">概览</a><a href="/mysql/dba_mysql/00-MySQL软件推荐.html" class="mobile-nav-link">MySQL软件推荐</a><a href="/mysql/dba_mysql/01-MySQL常用SQL.html" class="mobile-nav-link">MySQL常用SQL</a><a href="/mysql/dba_mysql/02-MySQL参数优化.html" class="mobile-nav-link">MySQL参数优化</a><a href="/mysql/dba_mysql/03-MySQL认证OCP.html" class="mobile-nav-link">MySQL认证OCP</a><a href="/mysql/dba_mysql/04-MySQL技术积累.html" class="mobile-nav-link">MySQL技术积累</a><a href="/mysql/dba_mysql/05-MySQL自动化管理.html" class="mobile-nav-link">MySQL自动化管理</a><a href="/mysql/dba_mysql/06-MySQL性能监控.html" class="mobile-nav-link">06-MySQL性能监控</a><a href="/mysql/dba_mysql/mycat/基于MyCat的MySQL高可用架构规划建议.html" class="mobile-nav-link">分布式架构规划</a><a href="/mysql/dba_mysql/mycat/基于MyCAT的分布式数据库架构.html" class="mobile-nav-link">分布式架构配置</a><strong class="mobile-nav-title">安全篇</strong><a href="/mysql/security/index.html" class="mobile-nav-link">概览</a><a href="/mysql/security/cis_mysql.html" class="mobile-nav-link">MySQL安全基线</a><strong class="mobile-nav-title">工具篇</strong><a href="/mysql/awesome-tools/index.html" class="mobile-nav-link">概览</a><a href="/mysql/awesome-tools/pt-archiver.html" class="mobile-nav-link">pt-archiver</a><a href="/mysql/awesome-tools/pt-percona_tookit.html" class="mobile-nav-link">percona_tookit</a><a href="/mysql/awesome-tools/workbench.html" class="mobile-nav-link">workbench</a><a href="/mysql/awesome-tools/otter/Otter实现上海美国异地机房双向同步.html" class="mobile-nav-link">otter</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="zh-cn" selected>简体中文</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="/js/lang_select.js"></script>


<script src="/js/toc.js"></script>


<script src="/js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->

<!-- at the end of the BODY -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: 'ad652bf20bcd81434ad119c8cf34722e',
    indexName: 'toberoot',
    inputSelector: '#search-input'
});
</script>

<!--   backup
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
  apiKey: 'ad652bf20bcd81434ad119c8cf34722e',
  indexName: 'toberoot',
  inputSelector: '#search-input'
});
</script>
-->

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
<!-- Bootstrap JS -->



</body>
</html>